<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Stupid Nix Tricks: SSH Multiplexing - Networking - 0x00sec - The Home of the Hacker</title>
    <meta name="description" content="At this point, it should basically be ‚ÄúStupid SSH tricks‚Ñ¢‚Äù, but whatever. 
Prerequisites:  Basic understanding of *nix and SSH 
Scenario
You have a server behind a firewalled network and you need to connect. You could ju&amp;hellip;">
    <meta name="generator" content="Discourse 3.6.0.beta2-latest - https://github.com/discourse/discourse version 3b1964f3ed8bdc2f181e2abccb1b116e4b814db5">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/30c4e7d76acf879a124fdfe4d8d126afe628c189_2_32x32.html">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e_2_180x180.html">
<meta name="theme-color" media="all" content="#171616">

<meta name="color-scheme" content="dark">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="5583.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="0x00sec - The Home of the Hacker Search">

    
    <link href="../../stylesheets/color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4.css_%3b%20filename_%3dUTF-8%27%27color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="15"/>

<link href="../../stylesheets/common_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27common_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common"  />

  <link href="../../stylesheets/mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile"  />
  <link href="../../stylesheets/desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop"  />



    <link href="../../stylesheets/chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="chat"  />
    <link href="../../stylesheets/checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="../../stylesheets/discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
    <link href="../../stylesheets/discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="../../stylesheets/discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="../../stylesheets/discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="../../stylesheets/discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="../../stylesheets/discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="../../stylesheets/discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="../../stylesheets/discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="../../stylesheets/discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="../../stylesheets/docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="../../stylesheets/footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="../../stylesheets/poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="poll"  />
    <link href="../../stylesheets/spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="../../stylesheets/chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="chat_mobile"  />
    <link href="../../stylesheets/discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-solved_mobile"  />
    <link href="../../stylesheets/discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-topic-voting_mobile"  />
    <link href="../../stylesheets/chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="chat_desktop"  />
    <link href="../../stylesheets/discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="../../stylesheets/poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="poll_desktop"  />

  <link href="../../stylesheets/common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960db.css_%3b%20filename_%3dUTF-8%27%27common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960dba97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="57" data-theme-name="0x00sec-v2"/>
    <link href="../../stylesheets/mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38.css_%3b%20filename_%3dUTF-8%27%27mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile_theme" data-theme-id="4" data-theme-name="mobile chrome"/>
    <link href="../../stylesheets/desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop_theme" data-theme-id="46" data-theme-name="header links v2"/>

    <link rel="stylesheet" href="../../../external.html?link=https://s3.amazonaws.com/0x00sec/monokai-sublime.css">
<script src="../../../external.html?link=https://s3.amazonaws.com/0x00sec/highlight.pack.js" nonce="79Fsxe6RBU1K2duegDwIp6vel"></script>
<script defer="" src="../../theme-javascripts/05954ff525aceb8daa8b585f92d758d311ae7077.js_%3b%20filename_%3dUTF-8%27%2705954ff525aceb8daa8b585f92d758d311ae7077a97f.js?__ws=d.clarkee.co.uk" data-theme-id="40" nonce="79Fsxe6RBU1K2duegDwIp6vel"></script>
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Stupid Nix Tricks: SSH Multiplexing&#39;" href="5583.rss" />
    <meta property="og:site_name" content="0x00sec - The Home of the Hacker" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://d.clarkee.co.uk/uploads/default/original/2X/2/27a5373af868edade07624e8205c46e79c247445.jpeg" />
<meta property="og:image" content="https://d.clarkee.co.uk/uploads/default/original/2X/2/27a5373af868edade07624e8205c46e79c247445.jpeg" />
<meta property="og:url" content="https://d.clarkee.co.uk/t/stupid-nix-tricks-ssh-multiplexing/5583" />
<meta name="twitter:url" content="https://d.clarkee.co.uk/t/stupid-nix-tricks-ssh-multiplexing/5583" />
<meta property="og:title" content="Stupid Nix Tricks: SSH Multiplexing" />
<meta name="twitter:title" content="Stupid Nix Tricks: SSH Multiplexing" />
<meta property="og:description" content="At this point, it should basically be ‚ÄúStupid SSH tricks‚Ñ¢‚Äù, but whatever.  Prerequisites:  Basic understanding of *nix and SSH  Scenario You have a server behind a firewalled network and you need to connect. You could just do something like ssh first-server and from there ssh internal-server. Not too bad, right?  What if there‚Äôs a whole subnet of servers that you might wanna reach? What if you don‚Äôt wanna SSH twice? What if you‚Äôre using something that wants to execute from your local machine but..." />
<meta name="twitter:description" content="At this point, it should basically be ‚ÄúStupid SSH tricks‚Ñ¢‚Äù, but whatever.  Prerequisites:  Basic understanding of *nix and SSH  Scenario You have a server behind a firewalled network and you need to connect. You could just do something like ssh first-server and from there ssh internal-server. Not too bad, right?  What if there‚Äôs a whole subnet of servers that you might wanna reach? What if you don‚Äôt wanna SSH twice? What if you‚Äôre using something that wants to execute from your local machine but..." />
<meta property="og:article:section" content="Networking" />
<meta property="og:article:section:color" content="8C6238" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="35 ‚ù§" />
<meta property="article:published_time" content="2018-02-22T15:51:42+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    <div id="top-navbar" class="container">
<span id="top-navbar-links" style="display:none;">
  <!--<a href="https://git.0x00sec.org" class="dow-menu">GitLab</a>  
  <a href="https://blog.0x00sec.org/irc" class="dow-menu">IRC</a>!-->
  <a href="../../../external.html?link=https://init.0x00sec.org/" class="dow-menu">Init</a>
  <a href="../../../external.html?link=https://discord.gg/c6BHVfn" class="dow-menu">Discord</a>
  <a href="../../../external.html?link=https://init.0x00sec.org/?partners" class="dow-menu">Partners</a>
</span>
</div>
    <header>
  <a href="../../index.html">0x00sec - The Home of the Hacker</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="5583.html">Stupid Nix Tricks: SSH Multiplexing</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/networking/63.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Networking</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='../../../external.html?link=http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Stupid Nix Tricks: SSH Multiplexing'>
      <link itemprop='url' href='5583.html'>
      <meta itemprop='datePublished' content='2018-02-22T15:51:41Z'>
        <meta itemprop='articleSection' content='Networking'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
        <meta itemprop='name' content='0x00sec - The Home of the Hacker'>
          <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
            <meta itemprop='url' content='../../uploads/default/original/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e.html'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/fraq.html'><span itemprop='name'>fraq</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="5583.html">


              <span class="crawler-post-infos">
                  <time  datetime='2018-02-22T15:51:42Z' class='post-time'>
                    February 22, 2018,  3:51pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T15:51:42Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>At this point, it should basically be ‚ÄúStupid SSH tricks‚Ñ¢‚Äù, but whatever.</p>
<p>Prerequisites:  Basic understanding of *nix and SSH</p>
<h2><a name="p-21698-scenario-1" class="anchor" href="#p-21698-scenario-1"></a>Scenario</h2>
<p>You have a server behind a firewalled network and you need to connect. You <em>could</em> just do something like <code>ssh first-server</code> and from there <code>ssh internal-server</code>. Not too bad, right?</p>
<p>What if there‚Äôs a whole subnet of servers that you might wanna reach? What if you don‚Äôt wanna SSH twice? What if you‚Äôre using something that wants to execute from your local machine but can‚Äôt really handle the manual two step SSH jump (such as <a href="../../../external.html?link=https://www.ansible.com/" rel="noopener nofollow ugc">Ansible</a>)</p>
<p>This is where SSH Multiplexing comes in <em>very</em> handy</p>
<h2><a name="p-21698-solution-part-1-pivot-box-2" class="anchor" href="#p-21698-solution-part-1-pivot-box-2"></a>Solution, part 1: Pivot box</h2>
<p>As you probably expected by now, we‚Äôre going to be digging into our ssh config file, so go ahead and pop an editor open to <code>~/.ssh/config</code></p>
<p>The first thing we want to do is setup our ‚Äúgateway‚Äù or ‚Äúbastion‚Äù or ‚Äújump‚Äù host. Whatever you want to call it. Doesn‚Äôt matter to me. Here‚Äôs an excerpt of mine with a breakdown of each line in the config</p>
<pre><code class="lang-auto">host jump
  User fraq
  Hostname foo.bar.baz
  ControlMaster auto
  ControlPath ~/.ssh/proxy-%r@%h:%p
  ControlPersist 5m
</code></pre>
<p><code>host jump</code> defines a friendly name in SSH for your machine. Note that this isn‚Äôt in <code>/etc/hosts</code>, so you can‚Äôt <code>ping jump</code>, but you can <code>ssh jump</code>. When you do use <code>ssh jump</code>, ssh opens up the config file, looks for a host entry that matches, and then uses that config to build the connection. Nothing we haven‚Äôt covered already in previous chapters.</p>
<p><code>User fraq</code> is the username we use to connect to <code>jump</code></p>
<p><code>Hostname foo.bar.baz</code> means that we connect to a server called <code>foo.bar.baz</code> in DNS. This can also be an IP address.</p>
<p>These next three are the ones you need for multiplexing:<br>
<code>ControlMaster auto</code> tells the ssh connection that you want to listen for control connections (used for multiplexing)</p>
<p><code>ControlPath</code> tells ssh where to put the control socket for the connections and how to format the file names. Per the OpenSSH cookbook:</p>
<blockquote>
<p>The combination %r,  %h and %p stand for the remote user name, the remote host and the remote host‚Äôs port. The control sockets should be given unique names.</p>
</blockquote>
<p><code>ControlPersist</code> tells ssh how long to leave the master open.</p>
<h2><a name="p-21698-solution-part-2-target-box-3" class="anchor" href="#p-21698-solution-part-2-target-box-3"></a>Solution, part 2: Target box</h2>
<p>Now that your jump host is setup to accept multiplexed SSH connections, it‚Äôs time to tell the SSH how to connect to your target box <em>through</em> the jump box.</p>
<pre><code class="lang-auto">Host target
    ProxyCommand ssh -W %h:%p jump
    User fraq
    Hostname 10.10.10.10
</code></pre>
<p>As you can see, it looks very similar to a standard config file, except for the <code>ProxyCommand</code> option. This tells the ssh connection to execute that command <em>first</em> as a prerequisite for connecting to the target machine. In our case, we‚Äôre saying that we want to <code>ssh -W</code> through the machine known to ssh as <code>jump</code>.</p>
<h2><a name="p-21698-conclusion-4" class="anchor" href="#p-21698-conclusion-4"></a>Conclusion</h2>
<p>With this in place, you can now use <code>jump</code> as a pivot to get into internal networks that it can access but you cannot, all without having to <code>ssh</code> twice manually. This means scripts or tools that invoke <code>ssh</code> can be used locally on your machine as well.</p>
<p>And yes, this can be chained basically indefinitely, so you can create some pretty long and crazy proxy connections.</p>
<p>Also, I very intentionally skipped over the in-depth explanation of <code>ssh -W</code> and the older <code>ssh nc</code> implementation. The whole purpose of this post was just to setup ssh multiplexing.</p>
<h3><a name="p-21698-references-5" class="anchor" href="#p-21698-references-5"></a>References</h3>
<aside class="onebox allowlistedgeneric" data-onebox-src="../../../external.html?link=https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing">
  <header class="source">
      <img src="../../../external.html?link=https://en.wikibooks.org/static/favicon/wikibooks.ico" class="site-icon" alt="" width="48" height="48">

      <a href="../../../external.html?link=https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing" target="_blank" rel="noopener nofollow ugc">en.wikibooks.org</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="../../../external.html?link=https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing" target="_blank" rel="noopener nofollow ugc">OpenSSH/Cookbook/Multiplexing - Wikibooks, open books for an open world</a></h3>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="10" />
              <span class='post-likes'>10 Likes</span>
            </div>


            
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/pry0cc.html'><span itemprop='name'>pry0cc</span></a>
                (Leader &amp; Offsec Engineer &amp; Forum Daddy)
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-22T15:56:17Z' class='post-time'>
                    February 22, 2018,  3:56pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T15:56:17Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This is cool and all. But I think you‚Äôre complicating this massively.</p>
<p>Here is an example of a jump box I use in my ssh config.</p>
<pre><code class="lang-auto">Host myhost
    Hostname 10.10.10.10
    Port 4040 
    User pry0cc
    ProxyJump <a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="a9d9dbd0e9c3dcc4d9cbc6d187cac6c4">[email&#160;protected]</a>
</code></pre>
<p>Simply putting a host inside ProxyJump does the same thing.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="5" />
              <span class='post-likes'>5 Likes</span>
            </div>


            
          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/fraq.html'><span itemprop='name'>fraq</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-22T16:10:25Z' class='post-time'>
                    February 22, 2018,  4:10pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T16:10:25Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>‚ÄúComplicating‚Äù all depends on your use case.</p>
<p>I intentionally omitted the CLI version of this, but as you‚Äôre probably aware, anything you do on the CLI can be done in the ssh config and vice versa. For me, I <em>always</em> ssh in certain boxes via jump hosts, so I want to remove the <code>-J whatevermiddlehost</code> from my command and just <code>ssh foo</code>.</p>
<p>Beyond that, there‚Äôs a very good reason to setup and use this via the config file: SSH config files can accept regex! If you want to execute a command against a whole subnet (ie, Ansible plays) then you can setup a host entry like <code>*.mydomain</code> or <code>10.10.*</code>, so in one fell swoop you setup proxycommands for a whole bunch of servers.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="3" />
              <span class='post-likes'>3 Likes</span>
            </div>


            
          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/fraq.html'><span itemprop='name'>fraq</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-22T16:20:06Z' class='post-time'>
                    February 22, 2018,  4:20pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T16:20:06Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>so, <code>ssh -J</code> is valid and good and useful if you‚Äôre doing a one-off. As you know I always recommend that if you do something twice, script/automate/remove the manual interaction.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>


            
          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/pry0cc.html'><span itemprop='name'>pry0cc</span></a>
                (Leader &amp; Offsec Engineer &amp; Forum Daddy)
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-22T16:36:55Z' class='post-time'>
                    February 22, 2018,  4:36pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T16:36:55Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Well, that code snippet ^ is an ssh config file. Not a command line switch.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>


            
          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/fraq.html'><span itemprop='name'>fraq</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-22T16:39:20Z' class='post-time'>
                    February 22, 2018,  4:39pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T16:39:20Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>It should also be noted that ProxyCommand and ProxyJump are not the same. ProxyCommand is present on most but not all older SSH versions and allows for arbitrary commands attached to SSH (like <code>nc</code>), whereas ProxyJump is shorthand for <code>ssh</code>ing through multiple machines.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>


            
          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/pry0cc.html'><span itemprop='name'>pry0cc</span></a>
                (Leader &amp; Offsec Engineer &amp; Forum Daddy)
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-22T16:40:31Z' class='post-time'>
                    February 22, 2018,  4:40pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T16:40:31Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Isn‚Äôt that what you want to achieve? Use a machine to connect through? Or am I mistaken?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>


            
          </div>
          <div id='post_8' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/fraq.html'><span itemprop='name'>fraq</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-22T16:41:16Z' class='post-time'>
                    February 22, 2018,  4:41pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-22T16:41:16Z'>
              <span itemprop='position'>8</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This is a basic example of connecting through machines, yeah. If you wanna use this to do additional fun stuff, that‚Äôs up to you.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>


            
          </div>
          <div id='post_9' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/maderas.html'><span itemprop='name'>maderas</span></a>
                (https://twitter.com/hackermaderas)
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-25T05:14:49Z' class='post-time'>
                    February 25, 2018,  5:14am
                  </time>
                  <meta itemprop='dateModified' content='2018-02-25T05:14:49Z'>
              <span itemprop='position'>9</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Your ‚ÄúStupid Nix Tricks‚Äù have become a favorite of mine fraq‚Ä¶thank you.</p>
<p>Also, I understand and appreciate pry0cc‚Äôs contribution to this post.</p>
<p>It should be noted that where exploitation is concerned, there could be any number of variables that could force improvisation of a concept or skill.</p>
<p>Stupid snags happen all the time on engagements, and sometimes you don‚Äôt have time to fully appreciate the cause of a snag until you are drafting your report (or even later when the client‚Äôs IT department let you in  on what could have occurred); you just keep shifting the methods by which you‚Äôd achieve your next step.</p>
<p>Thus, I appreciate fraq‚Äôs introduction of this concept and both your and pry0cc‚Äôs methods of execution.</p>
<p>I also appreciate the measures by which any work here on the Big0 is open to review and fair, polite criticism and discourse‚Ä¶so thank you both for being an example of this as well.</p>
<p>There are no sacred cows in this community, only cows and BBQ.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="5" />
              <span class='post-likes'>5 Likes</span>
            </div>


            
          </div>
          <div id='post_10' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/fraq.html'><span itemprop='name'>fraq</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-25T20:50:58Z' class='post-time'>
                    February 25, 2018,  8:50pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-25T20:50:58Z'>
              <span itemprop='position'>10</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="maderas" data-post="9" data-topic="5583">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/d.clarkee.co.uk/maderas/48/41549_2.png" class="avatar"> maderas:</div>
<blockquote>
<p>There are no sacred cows in this community, only cows and BBQ.</p>
</blockquote>
</aside>
<p>I‚Äôm gonna have to remember that <img src="../../images/emoji/twitter/wink8e5e.png?v=15" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>


            
          </div>
          <div id='post_11' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/maderas.html'><span itemprop='name'>maderas</span></a>
                (https://twitter.com/hackermaderas)
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-02-26T19:47:53Z' class='post-time'>
                    February 26, 2018,  7:47pm
                  </time>
                  <meta itemprop='dateModified' content='2018-02-26T19:47:53Z'>
              <span itemprop='position'>11</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>fraq-</p>
<p>I am glad you enjoyed the quip brother; it was in no way an equivalent exchange for the knowledge you (and pry0cc) shared.</p>
<p>It was a spontaneous flourish on my part; as well as being an apex skill of my trade, Nix Administration reminds of me of the older generations of Unix Administrators (far too many are retiring or being pushed into retirement ) who  projected a tangible  aura of arcane, strange power.</p>
<p>I was managed/mentored by one grey beard who got into Systems Administration of huge industrial/energy sector enterprise environments to ‚Äúease into retirement‚Äù .</p>
<p>His career had started as a programmer in the 1960‚Äôs: he designed and  programmed microprocessors for submarines .</p>
<p>The company provided no tools or resources other then the microprocessors themselves (back then software bundling as a service was still going strong thanks to companies likeIBM).</p>
<p>He had to program not just the microprocessors, but also almost all of his tools‚Ä¶mostly in Haskell‚Ä¶</p>
<p>I think your post and the back and forth with pyr0cc (which those Unix sorcerers were also prone to) reminded me of those times.</p>
<p>I think my mind got weird  with those words  as I realized that this community is building  the future facsimiles of those mages.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="4" />
              <span class='post-likes'>4 Likes</span>
            </div>


            
          </div>
          <div id='post_12' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/fraq.html'><span itemprop='name'>fraq</span></a>
                
                  Closed 
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-03-24T15:51:59Z' class='post-time'>
                    March 24, 2018,  3:51pm
                  </time>
                  <meta itemprop='dateModified' content='2018-03-24T15:51:59Z'>
              <span itemprop='position'>12</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This topic was automatically closed after 30 days. New replies are no longer allowed.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>


            
          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../index.html' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../categories.html' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../guidelines.html' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="../../../external.html?link=http://instant.page/3.0.0" type="module" defer="" integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1" nonce="79Fsxe6RBU1K2duegDwIp6vel"></script>
  </body>
  
</html>
