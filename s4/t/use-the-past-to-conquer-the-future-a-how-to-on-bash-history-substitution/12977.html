<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Use the Past to Conquer the Future - A How-To on BASH History Substitution - Linux - 0x00sec - The Home of the Hacker</title>
    <meta name="description" content="Use The Past To Conquer The Future - History Substitution
Since I had to get really close with bash recently and found myself typing the same things over and over again, I decided to open the amazing toolbox called ‚ÄúHist&amp;hellip;">
    <meta name="generator" content="Discourse 3.6.0.beta2-latest - https://github.com/discourse/discourse version 3b1964f3ed8bdc2f181e2abccb1b116e4b814db5">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/30c4e7d76acf879a124fdfe4d8d126afe628c189_2_32x32.html">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e_2_180x180.html">
<meta name="theme-color" media="all" content="#171616">

<meta name="color-scheme" content="dark">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="12977.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="0x00sec - The Home of the Hacker Search">

    
    <link href="../../stylesheets/color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4.css_%3b%20filename_%3dUTF-8%27%27color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="15"/>

<link href="../../stylesheets/common_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27common_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common"  />

  <link href="../../stylesheets/mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile"  />
  <link href="../../stylesheets/desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop"  />



    <link href="../../stylesheets/chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="chat"  />
    <link href="../../stylesheets/checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="../../stylesheets/discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
    <link href="../../stylesheets/discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="../../stylesheets/discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="../../stylesheets/discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="../../stylesheets/discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="../../stylesheets/discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="../../stylesheets/discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="../../stylesheets/discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="../../stylesheets/discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="../../stylesheets/docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="../../stylesheets/footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="../../stylesheets/poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="poll"  />
    <link href="../../stylesheets/spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="../../stylesheets/chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="chat_mobile"  />
    <link href="../../stylesheets/discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-solved_mobile"  />
    <link href="../../stylesheets/discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-topic-voting_mobile"  />
    <link href="../../stylesheets/chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="chat_desktop"  />
    <link href="../../stylesheets/discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="../../stylesheets/poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="poll_desktop"  />

  <link href="../../stylesheets/common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960db.css_%3b%20filename_%3dUTF-8%27%27common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960dba97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="57" data-theme-name="0x00sec-v2"/>
    <link href="../../stylesheets/mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38.css_%3b%20filename_%3dUTF-8%27%27mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile_theme" data-theme-id="4" data-theme-name="mobile chrome"/>
    <link href="../../stylesheets/desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop_theme" data-theme-id="46" data-theme-name="header links v2"/>

    <link rel="stylesheet" href="../../../external.html?link=https://s3.amazonaws.com/0x00sec/monokai-sublime.css">
<script src="../../../external.html?link=https://s3.amazonaws.com/0x00sec/highlight.pack.js" nonce="b0EYRuRXdl1CTWUjXLJ91DLZm"></script>
<script defer="" src="../../theme-javascripts/05954ff525aceb8daa8b585f92d758d311ae7077.js_%3b%20filename_%3dUTF-8%27%2705954ff525aceb8daa8b585f92d758d311ae7077a97f.js?__ws=d.clarkee.co.uk" data-theme-id="40" nonce="b0EYRuRXdl1CTWUjXLJ91DLZm"></script>
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Use the Past to Conquer the Future - A How-To on BASH History Substitution&#39;" href="12977-2.html" />
    <meta property="og:site_name" content="0x00sec - The Home of the Hacker" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://d.clarkee.co.uk/uploads/default/original/2X/2/27a5373af868edade07624e8205c46e79c247445.jpeg" />
<meta property="og:image" content="https://d.clarkee.co.uk/uploads/default/original/2X/2/27a5373af868edade07624e8205c46e79c247445.jpeg" />
<meta property="og:url" content="https://d.clarkee.co.uk/t/use-the-past-to-conquer-the-future-a-how-to-on-bash-history-substitution/12977" />
<meta name="twitter:url" content="https://d.clarkee.co.uk/t/use-the-past-to-conquer-the-future-a-how-to-on-bash-history-substitution/12977" />
<meta property="og:title" content="Use the Past to Conquer the Future - A How-To on BASH History Substitution" />
<meta name="twitter:title" content="Use the Past to Conquer the Future - A How-To on BASH History Substitution" />
<meta property="og:description" content="Use The Past To Conquer The Future - History Substitution Since I had to get really close with bash recently and found myself typing the same things over and over again, I decided to open the amazing toolbox called ‚ÄúHistory Substitution‚Äù and was amazed by how much you can do with it. It‚Äôs a feature built into bash that allows you to get commands and arguments from your history.  In this How-To I hope to be able to share this amazement with you! So let‚Äôs go!   1. Introduction A long time ago, the..." />
<meta name="twitter:description" content="Use The Past To Conquer The Future - History Substitution Since I had to get really close with bash recently and found myself typing the same things over and over again, I decided to open the amazing toolbox called ‚ÄúHistory Substitution‚Äù and was amazed by how much you can do with it. It‚Äôs a feature built into bash that allows you to get commands and arguments from your history.  In this How-To I hope to be able to share this amazement with you! So let‚Äôs go!   1. Introduction A long time ago, the..." />
<meta property="og:article:section" content="Linux" />
<meta property="og:article:section:color" content="283890" />
<meta property="og:article:tag" content="beginner" />
<meta property="og:article:tag" content="programming" />
<meta property="og:article:tag" content="bash" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="19 ‚ù§" />
<meta property="article:published_time" content="2019-04-13T11:45:10+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    <div id="top-navbar" class="container">
<span id="top-navbar-links" style="display:none;">
  <!--<a href="https://git.0x00sec.org" class="dow-menu">GitLab</a>  
  <a href="https://blog.0x00sec.org/irc" class="dow-menu">IRC</a>!-->
  <a href="../../../external.html?link=https://init.0x00sec.org/" class="dow-menu">Init</a>
  <a href="../../../external.html?link=https://discord.gg/c6BHVfn" class="dow-menu">Discord</a>
  <a href="../../../external.html?link=https://init.0x00sec.org/?partners" class="dow-menu">Partners</a>
</span>
</div>
    <header>
  <a href="../../index.html">0x00sec - The Home of the Hacker</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="12977.html">Use the Past to Conquer the Future - A How-To on BASH History Substitution</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/linux/64.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #283890'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Linux</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/beginner.html' class='discourse-tag' rel="tag">beginner</a>, 
            <a href='../../tag/programming.html' class='discourse-tag' rel="tag">programming</a>, 
            <a href='../../tag/bash.html' class='discourse-tag' rel="tag">bash</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='../../../external.html?link=http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Use the Past to Conquer the Future - A How-To on BASH History Substitution'>
      <link itemprop='url' href='12977.html'>
      <meta itemprop='datePublished' content='2019-04-13T11:45:10Z'>
        <meta itemprop='articleSection' content='Linux'>
      <meta itemprop='keywords' content='beginner, programming, bash'>
      <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
        <meta itemprop='name' content='0x00sec - The Home of the Hacker'>
          <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
            <meta itemprop='url' content='../../uploads/default/original/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e.html'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/Tac0caT.html'><span itemprop='name'>Tac0caT</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="12977.html">


              <span class="crawler-post-infos">
                  <time  datetime='2019-04-13T11:45:10Z' class='post-time'>
                    April 13, 2019, 11:45am
                  </time>
                  <meta itemprop='dateModified' content='2019-04-15T08:56:04Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h1><a name="p-39608-use-the-past-to-conquer-the-future-history-substitution-1" class="anchor" href="#p-39608-use-the-past-to-conquer-the-future-history-substitution-1"></a>Use The Past To Conquer The Future - History Substitution</h1>
<p>Since I had to get <strong><em>really</em></strong> close with bash recently and found myself typing the same things over and over again, I decided to open the amazing toolbox called <em>‚ÄúHistory Substitution‚Äù</em> and was amazed by how much you can do with it. It‚Äôs a feature built into bash that allows you to get commands and arguments from your history.<br>
In this How-To I hope to be able to share this amazement with you! So let‚Äôs go!</p>
<hr>
<h2><a name="p-39608-h-1-introduction-2" class="anchor" href="#p-39608-h-1-introduction-2"></a>1. Introduction</h2>
<p>A long time ago, the Grandmaster who taught me Linux brought a small detail to my attention.<br>
It went a little something like this:</p>
<blockquote>
<p>Me: apt update<br>
$ apt update: permission denied<br>
Me: sudo apt upda ‚Ä¶<br>
Him: wait! I shall teach you ‚Ä¶<br>
$ sudo !!<br>
sudo apt update</p>
</blockquote>
<p>Suffice to say, my mind was blown!</p>
<p>After learning this, I used it as often as I could, not realizing that this rabbit hole went even deeper than I imagined.</p>
<hr>
<h2><a name="p-39608-h-2-down-the-hole-we-go-3" class="anchor" href="#p-39608-h-2-down-the-hole-we-go-3"></a>2. Down the hole we go</h2>
<p>In our daily life with bash we often come across situations like this:</p>
<blockquote>
<p>less /this/path/is/really/long/and/annoying/randomfile</p>
</blockquote>
<p>Now if we‚Äôre done looking at the file and want to open it in vi we have to:</p>
<p>press the up arrow ‚Üí pos1 ‚Üí del/del/del/del ‚Üí vi</p>
<p>which is ok but still a pain in the butt if we have to do it more than once in our entire lifetime.<br>
Instead with history subsitution we can just do:</p>
<blockquote>
<p>vi !!$</p>
</blockquote>
<p>So how does this work?<br>
As you may have noticed by now, to start a history substitution command you begin with two exclamation points.<br>
Given only two consecutive exclamation points returns the whole last command.<br>
If we use history substitution with other options we can always omit the second exclamation point.</p>
<p>When used with a dollar sign it returns only the last argument.<br>
The other way around, an exclamation point followed by a circumflex (this thing ‚Üí ^ ) takes only the first argument.<br>
Let‚Äôs look at some examples with <strong><em>‚Äúecho a b c‚Äù</em></strong> as the last command used:</p>
<blockquote>
<p>!! ‚Üí echo a b c<br>
echo !! ‚Üí echo echo a b c<br>
echo !$ ‚Üí echo c<br>
echo !^ ‚Üí echo a<br>
echo !* ‚Üí echo  a b c</p>
</blockquote>
<p>The first command above would also execute it immediately.<br>
Notice that the two exclamations points also get the command and the one with ^ ignores it.<br>
To get all arguments but not the command, the asterisk is used.<br>
Additionally you can get specific arguments using a colon, in this context it‚Äôs called the word designator:</p>
<blockquote>
<p>echo !:0 ‚Üí echo echo<br>
echo !:2 ‚Üí echo b<br>
echo !:2-3 ‚Üí echo b c<br>
echo !:2* ‚Üí echo b c<br>
echo !:1 !:3 ‚Üí echo a c</p>
</blockquote>
<p>But let‚Äôs say that you had to run a different command in the meantime and the things you need are not in the last command anymore. This is also easily done by telling it ‚Äúhow long ago‚Äù the command was used.</p>
<blockquote>
<p>$ echo a b c<br>
$ echo d e f<br>
!-1 ‚Üí echo d e f<br>
!-2 ‚Üí echo a b c</p>
</blockquote>
<p>This is very helpful when using them in quick succession but nigh impossible to keep track of over longer sessions. In those cases it‚Äôs a lot easier to use the built-in string function.</p>
<blockquote>
<p>$ uname -r<br>
$ uname -a<br>
$ echo a b c<br>
echo !un ‚Üí echo uname -a<br>
echo !un:* ‚Üí echo -a<br>
echo !?nam ‚Üí echo uname -a<br>
echo !?me -r? ‚Üí echo uname -r</p>
</blockquote>
<p>As we can see, only giving it the beginning of the command it automatically looks for the first occurence (going upwards) in the history and returns it. Using the question marks we can look for parts inside the command to further narrow it down and filter alike commands.</p>
<h3><a name="p-39608-now-onto-paths-4" class="anchor" href="#p-39608-now-onto-paths-4"></a>Now onto paths!</h3>
<p>Another great feature built into this, is the path handling.<br>
It requires some getting used to but is also very straightforward.<br>
let‚Äôs assume we have this path:</p>
<blockquote>
<p>/home/user/folder/file.txt</p>
</blockquote>
<p>This is what we can do:</p>
<blockquote>
<p>Get the path up to file:<br>
echo !:h ‚Üí /home/user/folder</p>
</blockquote>
<blockquote>
<p>Get the filename plus extension:<br>
echo !:t ‚Üí file.txt</p>
</blockquote>
<blockquote>
<p>Get the path up to file extension:<br>
echo !:r ‚Üí /home/user/folder/file</p>
</blockquote>
<blockquote>
<p>Get only file extension:<br>
echo !:e ‚Üí .txt</p>
</blockquote>
<blockquote>
<p>Get only filename:<br>
echo !:t:r ‚Üí file</p>
</blockquote>
<h3><a name="p-39608-substitution-5" class="anchor" href="#p-39608-substitution-5"></a>Substitution!</h3>
<p>We can also substitute certain strings with other strings.<br>
For example if we have <strong><em>/path/file1</em></strong> and we want to change <strong>file1</strong> to <strong>file2</strong> we do:</p>
<blockquote>
<p>!:s/file1/file2</p>
</blockquote>
<p>But this only works on the first occurence found!<br>
If we want to do this globally, so for every occurence of <strong>file1</strong>, we use:</p>
<blockquote>
<p>!:gs/file1/file2</p>
</blockquote>
<p>Example:</p>
<blockquote>
<p>$ cp /path/file1 /path/folder/file1<br>
!:gs/file1/file2 ‚Üí cp /path/file2 /path/folder/file2</p>
</blockquote>
<p>If you want to repeat a successful substitution in a different context then you don‚Äôt need to write it again.<br>
You can just use:</p>
<blockquote>
<p>!:&amp; ‚Üí for single occurence substitution<br>
!:g&amp; ‚Üí for global substitution</p>
</blockquote>
<hr>
<h2><a name="p-39608-h-3-summary-6" class="anchor" href="#p-39608-h-3-summary-6"></a>3. Summary</h2>
<details>
<summary>
Summary/Cheat-Sheet</summary>
<blockquote>
<p>!! ‚Üí execute last command<br>
!$ ‚Üí return last argument<br>
!^ ‚Üí return first argument<br>
!* ‚Üí return all arguments<br>
!:n ‚Üí return the string on nth position<br>
!:n-x ‚Üí return position n to x<br>
!:n* ‚Üí return all arguments starting with n<br>
!n ‚Üí execute command with history number n<br>
!-n ‚Üí exectue command that was run n commands back<br>
!?str ‚Üí execute first command (going up) that matches <em>str</em><br>
!?str? ‚Üí execute first command (going up) that contains <em>str</em><br>
!:h ‚Üí return path up to bas filename<br>
!:t ‚Üí return only base filename<br>
!:r ‚Üí return path up to extension<br>
!:e ‚Üí return only extension<br>
!:s/str1/str2 ‚Üí substitute first occurence of <em>str1</em> with <em>str2</em><br>
!:gs/str1/str2 ‚Üí substitute all occurences of <em>str1</em> with <em>str2</em><br>
!:&amp; ‚Üí repeat last successful substitution<br>
!:g&amp; ‚Üí repeat last successful substitution and make it global<br>
<code>!:p</code> ‚Üí don‚Äôt execute, print only</p>
</blockquote>
</details>
<hr>
<h2><a name="p-39608-h-4-extras-7" class="anchor" href="#p-39608-h-4-extras-7"></a>4. Extras</h2>
<ul>
<li>If you missed it in the summary, you can only print the return value of the history substitution without executing it by using <code>!:p</code></li>
<li>Of course you can connect all of these to do some crazy things!</li>
<li>To use this feature in bash scripts, supply it with <code>set -H</code></li>
<li>To run a command and not have it in the history, just type a space in front of it! This works for any command, not just history substitution.</li>
</ul>
<hr>
<p>And that‚Äôs all! If you have any questions or found a mistake just leave a comment below.</p>
<p>I sincerely hope you were able to learn something new today and if you already knew about it then I hope I was able to refresh your memory! <img src="../../images/emoji/twitter/smiley8e5e.png?v=15" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"></p>
<h3><a name="p-39608-happy-hacking-8" class="anchor" href="#p-39608-happy-hacking-8"></a>Happy Hacking!</h3>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="14" />
              <span class='post-likes'>14 Likes</span>
            </div>


            
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/hunter.html'><span itemprop='name'>hunter</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-04-13T23:39:07Z' class='post-time'>
                    April 13, 2019, 11:39pm
                  </time>
                  <meta itemprop='dateModified' content='2019-04-13T23:39:07Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>That‚Äôs a very useful feature that i‚Äôve not heard about. Thank you! I‚Äôm now wondering if it could be used maliciously though <img src="../../../0x00sec.org/images/emoji/twitter/thinkingc164.html?v=9" title=":thinking:" class="emoji" alt=":thinking:"> Maybe poisoning the bash_history with evil commands? idk</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="3" />
              <span class='post-likes'>3 Likes</span>
            </div>


            
          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/lkw.html'><span itemprop='name'>lkw</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-04-15T07:58:44Z' class='post-time'>
                    April 15, 2019,  7:58am
                  </time>
                  <meta itemprop='dateModified' content='2019-04-15T07:58:44Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Another feature it could be good to point out is that you can use ctrl-r to search the command history.<br>
<a href="../../../external.html?link=https://www.gnu.org/software/bash/manual/html_node/Searching.html" class="onebox" target="_blank">https://www.gnu.org/software/bash/manual/html_node/Searching.html</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>


            
          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/pry0cc.html'><span itemprop='name'>pry0cc</span></a>
                (Leader &amp; Offsec Engineer &amp; Forum Daddy)
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-04-15T11:27:31Z' class='post-time'>
                    April 15, 2019, 11:27am
                  </time>
                  <meta itemprop='dateModified' content='2019-04-15T11:27:31Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Oh man, I‚Äôve been using the linux command line for like 10 years and I never knew about these shortcuts.</p>
<p>Thank you so much!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>


            
          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/Tac0caT.html'><span itemprop='name'>Tac0caT</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-04-16T15:58:01Z' class='post-time'>
                    April 16, 2019,  3:58pm
                  </time>
                  <meta itemprop='dateModified' content='2019-04-19T12:27:24Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I‚Äôm glad to hear you enjoyed it!<br>
Your malicious use idea intrigued me <a class="mention" href="../../u/hunter.html">@hunter</a> so I tried to strace the history substitution, as a starting point, and to my surprise it didn‚Äôt work!<br>
Maybe it‚Äôs also something to do with how I traced it!?<br>
I used:<br>
<code>stty; cat | strace bash &gt; /dev/null</code><br>
But I always get <code>"!!" - command not found</code><br>
Anyone know why this could be? It doesn‚Äôt really make sense to me since it‚Äôs a shell keyword and built into bash‚Ä¶</p>
<p>EDIT: it works when attaching to an already active bash process‚Ä¶ Not quite sure why though, maybe I‚Äôll make a follow up post exploring this in more detail</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>


            
          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/BL4CKH47H4CK3R.html'><span itemprop='name'>BL4CKH47H4CK3R</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-05-03T07:04:59Z' class='post-time'>
                    May 3, 2019,  7:04am
                  </time>
                  <meta itemprop='dateModified' content='2019-05-03T07:04:59Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Oh man very nice post with nice explanation<br>
Carry on man !!!<br>
Happy Hacking <img src="../../../0x00sec.org/images/emoji/twitter/smilec164.html?v=9" title=":smile:" class="emoji" alt=":smile:"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>


            
          </div>
          <div id='post_8' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/m242.html'><span itemprop='name'>m242</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-05-03T10:13:16Z' class='post-time'>
                    May 3, 2019, 10:13am
                  </time>
                  <meta itemprop='dateModified' content='2019-05-03T10:13:16Z'>
              <span itemprop='position'>8</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Interestingly, zsh does the same thing, but replaces expressions not when enter is hit, but when the expression is done, wich means for zsh that there is a space after it.<br>
For this reason, this example doesn‚Äôt work :</p>
<aside class="quote no-group" data-username="Tac0caT" data-post="1" data-topic="12977">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../letter_avatar_proxy/v4/letter/t/439d5e/48.png" class="avatar"> Tac0caT:</div>
<blockquote>
<p>$ uname -r<br>
$ uname -a<br>
$ echo a b c<br>
echo !un -&gt; echo uname -a<br>
echo !un:* -&gt; echo -a<br>
echo !?nam -&gt; echo uname -a<br>
echo !?me -r? -&gt; echo uname -r</p>
</blockquote>
</aside>
<p>As  <code>echo !?me -r?</code> is replaced by <code>echo uname -a </code>before we can type <code>-r</code>.<br>
A simple fix is to use <code>echo !?-r?</code> instead.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>


            
          </div>
          <div id='post_9' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/system.html'><span itemprop='name'>system</span></a>
                (system)
                  Closed 
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-05-13T11:45:12Z' class='post-time'>
                    May 13, 2019, 11:45am
                  </time>
                  <meta itemprop='dateModified' content='2019-05-13T11:45:12Z'>
              <span itemprop='position'>9</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This topic was automatically closed after 30 days. New replies are no longer allowed.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>


            
          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../index.html' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../categories.html' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../guidelines.html' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    <script src="../../../external.html?link=http://instant.page/3.0.0" type="module" defer="" integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1" nonce="b0EYRuRXdl1CTWUjXLJ91DLZm"></script>
  </body>
  
</html>
