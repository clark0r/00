<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>CAPTCHA - OCR breaker - Programming - 0x00sec - The Home of the Hacker</title>
<meta name="description" content="Hi fellas, 
Today I will show you how to bypass OCR based CAPTCHA. The first thing that you have to keep in mind is that every CAPTCHAs are different and require an adapted image processing. For the sake of this article,&amp;hellip;">
<meta name="generator" content="Discourse 3.1.0.beta6 - https://github.com/discourse/discourse version 80a1709965fa59da824b2e3392976fc6fc898f80">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/30c4e7d76acf879a124fdfe4d8d126afe628c189_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e_2_180x180.png">
<meta name="theme-color" media="all" content="#171616">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="764.html" />
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="0x00sec - The Home of the Hacker Search">
<link href="../../stylesheets/color_definitions_0x00sec-v2_15_57_a5ef387651921c3e4c7aa1108536015ba8299efb.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" class="light-scheme" />
<link href="../../stylesheets/desktop_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="desktop" />
<link href="../../stylesheets/chat_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="chat" />
<link href="../../stylesheets/discourse-details_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-details" />
<link href="../../stylesheets/discourse-lazy-videos_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-lazy-videos" />
<link href="../../stylesheets/discourse-local-dates_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-local-dates" />
<link href="../../stylesheets/discourse-narrative-bot_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-narrative-bot" />
<link href="../../stylesheets/discourse-presence_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-presence" />
<link href="../../stylesheets/discourse-spoiler-alert_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-spoiler-alert" />
<link href="../../stylesheets/docker_manager_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="docker_manager" />
<link href="../../stylesheets/poll_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="poll" />
<link href="../../stylesheets/chat_desktop_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="chat_desktop" />
<link href="../../stylesheets/poll_desktop_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="poll_desktop" />
<link href="../../stylesheets/desktop_theme_46_f36ade55bf80933494fe3b5fab518f477de3bd4e.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="46" data-theme-name="header links v2" />
<link href="../../stylesheets/desktop_theme_57_8c0e890a61cdb4c5833a9f9c96664ed164e7d645.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="57" data-theme-name="0x00sec-v2" />
<link rel="stylesheet" href="https://s3.amazonaws.com/0x00sec/monokai-sublime.css">
<script src="https://s3.amazonaws.com/0x00sec/highlight.pack.js"></script>
<link rel="preload" href="../../theme-javascripts/440fd21108f5ba9e5dfe06cca9fc842569d5a874.js%3F__ws=0x00sec.org" as="script">
<script defer src="../../theme-javascripts/440fd21108f5ba9e5dfe06cca9fc842569d5a874.js%3F__ws=0x00sec.org" data-theme-id="40"></script>
<link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;CAPTCHA - OCR breaker&#39;" href="764.rss" />
<meta property="og:site_name" content="0x00sec - The Home of the Hacker" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://0x00sec.s3.amazonaws.com/original/1X/6dfdf398a328204e6764de60b608d0f7b06fdce9.png" />
<meta property="og:image" content="https://0x00sec.s3.amazonaws.com/original/1X/6dfdf398a328204e6764de60b608d0f7b06fdce9.png" />
<meta property="og:url" content="https://0x00sec.org/t/captcha-ocr-breaker/764" />
<meta name="twitter:url" content="https://0x00sec.org/t/captcha-ocr-breaker/764" />
<meta property="og:title" content="CAPTCHA - OCR breaker" />
<meta name="twitter:title" content="CAPTCHA - OCR breaker" />
<meta property="og:description" content="Hi fellas,  Today I will show you how to bypass OCR based CAPTCHA. The first thing that you have to keep in mind is that every CAPTCHAs are different and require an adapted image processing. For the sake of this article, I selected two distinct types of CAPTCHA, each of them needing a specific approach to be resolved.  Theory OCR based CAPTCHA flooded the market around 2000 with aim was to secure any web services online against abuses such as ticket scalping, automatic submission URL or spams.  T..." />
<meta name="twitter:description" content="Hi fellas,  Today I will show you how to bypass OCR based CAPTCHA. The first thing that you have to keep in mind is that every CAPTCHAs are different and require an adapted image processing. For the sake of this article, I selected two distinct types of CAPTCHA, each of them needing a specific approach to be resolved.  Theory OCR based CAPTCHA flooded the market around 2000 with aim was to secure any web services online against abuses such as ticket scalping, automatic submission URL or spams.  T..." />
<meta property="og:article:section" content="Programming" />
<meta property="og:article:section:color" content="92278F" />
<meta property="og:article:tag" content="programming" />
<meta property="og:article:tag" content="hacking" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="22 ❤" />
<meta property="article:published_time" content="2016-07-20T12:24:26+00:00" />
<meta property="og:ignore_canonical" content="true" />
</head>
<body class="crawler ">
<div id="top-navbar" class="container">
<span id="top-navbar-links" style="display:none;">

<a href="https://init.0x00sec.org" class="dow-menu">Init</a>
<a href="https://discord.gg/c6BHVfn" class="dow-menu">Discord</a>
<a href="https://init.0x00sec.org/?partners" class="dow-menu">Partners</a>
</span>
</div>
<header>
<a href="../../index.html">
0x00sec - The Home of the Hacker
</a>
</header>
<div id="main-outlet" class="wrap" role="main">
<div id="topic-title">
<h1>
<a href="764.html">CAPTCHA - OCR breaker</a>
</h1>
<div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
<a href="../../c/programming/61.html" class="badge-wrapper bullet" itemprop="item">
<span class="badge-category-bg" style="background-color: #92278F"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Programming</span>
</span>
</a>
<meta itemprop="position" content="1" />
</span>
</div>
<div class="topic-category">
<div class="discourse-tags list-tags">
<a href="../../tag/programming.html" class="discourse-tag" rel="tag">programming</a>,
<a href="../../tag/hacking.html" class="discourse-tag" rel="tag">hacking</a>
</div>
</div>
</div>
<div itemscope itemtype="http://schema.org/DiscussionForumPosting">
<meta itemprop="headline" content="CAPTCHA - OCR breaker">
<meta itemprop="articleSection" content="Programming">
<meta itemprop="keywords" content="programming, hacking">
<div itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="0x00sec - The Home of the Hacker">
<div itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
<meta itemprop="url" content="https://0x00sec.org/uploads/default/original/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e.png">
</div>
</div>
<div id="post_1" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Nitrax"><span itemprop="name">Nitrax</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<link itemprop="image" href="https://0x00sec.s3.amazonaws.com/original/1X/6dfdf398a328204e6764de60b608d0f7b06fdce9.png">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T12:24:26Z" class="post-time">
July 20, 2016, 12:24pm
</time>
<meta itemprop="dateModified" content="2016-09-01T12:06:11Z">
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Hi fellas,</p>
<p>Today I will show you how to bypass <a href="https://en.wikipedia.org/wiki/Optical_character_recognition" rel="noopener nofollow ugc">OCR</a> based CAPTCHA. The first thing that you have to keep in mind is that every CAPTCHAs are different and require an adapted image processing. For the sake of this article, I selected two distinct types of CAPTCHA, each of them needing a specific approach to be resolved.</p>
<h2>Theory</h2>
<p>OCR based CAPTCHA flooded the market around 2000 with aim was to secure any web services online against abuses such as ticket scalping, automatic submission URL or spams.</p>
<p>Those CAPTCHAs consist on the recognition of a string of characters in order to achieve, as its acronym say, a <a href="https://en.wikipedia.org/wiki/Reverse_Turing_test" rel="noopener nofollow ugc">Reverse Turing Test</a> to verify that the end user is human, preventing bots usage.</p>
<p>To make it works and avoid automation, companies process randomized strings by applying distortion, rotation and background randomization. However, for usability concern, those transformations have to be carefully balanced to not reduce its usability and it’s this weakness that we will exploit to thwart it.</p>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/6dfdf398a328204e6764de60b608d0f7b06fdce9.png" width="382" height="150"></p>
<p>OCR based CAPTCHA are all about image processing. Our aim is to isolate the string to recognized in order to validate the authentication. The methodology is as follow :</p>
<pre><code>load image

remove background

if OCR successful
    then submit the result
else if rotation or distortion
    then rotation / distortion attenuation
        if OCR successful
            then submit the result
        else
            isolate each letter to improve the OCR result. Once the string recognized, submit the result
</code></pre>
<p>As you can see in the pseudo code above, the methodology depends completely on your CAPTCHA and the degree of distortion and randomization which have been applied to the image. That is why, it is almost impossible to develop an universal CAPTCHA breaker. Indeed, there are too many factors to take into consideration and only a modular approach will be successful to reach this goal.</p>
<h2>Practical cases</h2>
<p>The codes below have been developed, for practical reasons, with NodeJS. Indeed, this language is very easy to handle and provides a colossal amount of modules, reducing the development time.</p>
<h3>Example 1</h3>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/892cc406c4cfef39dadd95e86248c3cc5cb0625f.png" width="312" height="102"></p>
<p>This example is quite straightforward and trivial. Indeed, the string color is completely different from the background and a simple loop, replacing each pixel value other than 15 or above (black) by 255 (white) will be enough to isolate the data.</p>
<pre><code class="lang-auto">for (var y = this.height * 4; y &gt;= 0; y--) {
    for (var x = 0; x &lt; this.width; x++) {
        let idx = (this.width * y + x);

        if (this.data[idx] &gt; 15) {
            this.data[idx] = 255;
        }
    }
}
</code></pre>
<h4>Result</h4>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/14054b926d45f618a5278d9c96e37fae9ccb62cf.png" width="312" height="102"></p>
<h3>Example 2</h3>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/1f999636852f259b9ed764e9560175ea3a327e36.png" width="360" height="126"></p>
<p>This time, it is well more complicated. Indeed, the background is truly random and uses the same colors than the characters that we have to isolate. To resolve this issue and reduce the impact of the processing on the string, I calculated the image color threshold, by excluding, prior, pixels close to the white color. Then I replaced the pixels value inferior to this threshold by 255.</p>
<pre><code class="lang-auto">for (var y = this.height * 4; y &gt;= 0; y--) {
    for (var x = 0; x &lt; this.width; x++) {
        let idx = (this.width * y + x);

        if (this.data[idx] &lt; 234) {
            threshold += this.data[idx];
            ++counter;
        }
    }
}

for (var y = this.height * 4; y &gt;= 0; y--) {
    for (var x = 0; x &lt; this.width; x++) {
        let idx = (this.width * y + x);

        if (this.data[idx] &lt; threshold / counter - 2) {
            this.data[idx] = 255;
        }
    }
}
</code></pre>
<h4>Result</h4>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/9ded97a4867b5e5bba17c6f7b1d8f306269acdd4.png" width="360" height="126"></p>
<h2>Real case</h2>
<p>In order to show you a well more concrete application, I picked a CAPTCHA challenge on <a href="http://canyouhack.it" rel="noopener nofollow ugc">http://canyouhack.it</a> and developed a tool to resolve it, following the methodology stated earlier.</p>
<pre><code class="lang-auto">'use strict';

const fs = require('fs');
const PNG = require('pngjs').PNG;
const request = require('request');
const tesseract = require('node-tesseract');

const FILENAME = 'captcha.png';

/**
 * Remove the background image in order to isolate the string to recognize
 * @param name Image name
 */
function removeBackgroung(name) {
    fs.createReadStream(name)
      .pipe(new PNG())
      .on('parsed', function() {

        for (var y = this.height * 4; y &gt;= 0; y--) {
            for (var x = 0; x &lt; this.width; x++) {
                let idx = (this.width * y + x);

                if (this.data[idx] != 0) {
                    this.data[idx] = 255;
                }
            }
        }

        this.pack().pipe(fs.createWriteStream(name));
    });
}

/**
 * Perform string recognization through tesseract node module.
 */
function ocr() {
    tesseract.process(__dirname + '/../' + FILENAME, (err, text) =&gt; {
        if (err) {
            console.error(err);
        } else {
            let char = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';
            let value = "";

            for (var i = 0; i &lt; text.length; i++) {
                if (char.indexOf(text[i]) &gt; -1) {
                    value += text[i];
                }
            }

            request.get(options.url + "?text=" + value, {jar: jar}).pipe(fs.createWriteStream('result.png'));
        }
    });
}

let options = {
    url: 'http://canyouhack.it/Content/Challenges/Captcha/Captcha1.php'
}

let jar = request.jar();
let cookie = "";

// Get the image and save the session cookie.
let stream = request.get(options)
    .on('response', (res) =&gt; {
        cookie = request.cookie(res.headers["set-cookie"].toString());
    })
    .pipe(fs.createWriteStream(FILENAME));

// Once the image saved, call the image processing and string recognization functions.
stream.on('finish', () =&gt; {
    setTimeout(function() {
        jar.setCookie(cookie, options.url);
        removeBackgroung(FILENAME);
        ocr();
    }, 1000);
});
</code></pre>
<h4>Original CAPTCHA</h4>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/990d72a94a1c01c4d45ec2dcc32672dad98486e2.png" width="400" height="100"></p>
<h4>Post processing</h4>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/24920b008cb5a538cca0045d951cdc982c02a9ab.png" width="400" height="100"></p>
<h4>Token</h4>
<div class="spoiler">
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/3d9df176c6f289f7f710c94ce2f1f3f1e3477d33.png" width="400" height="100"></p>
</div>
<h2>Notes</h2>
<p>Once again, every CAPTCHAs are different and require a specific image processing. Consequently, this tool will not work with other types of CAPTCHA ! However, you now have all the keys to create your own CAPTCHA breaker. Lastly, keep in mind that OCR engines such as tesseract or openCV are not perfect and false positives can occur. Nonetheless, it easy to reach 60% of success, which is enough in most case. Indeed, according to researchers, if a CAPTCHA can be bypassed by a percentage above 1%, it is considered as broken and not safe to use.</p>
<p>That’s it for today.</p>
<p>See you for the next tutorial of this series.</p>
<p>Best,<br>
Nitrax</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="5" />
<span class="post-likes">5 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
<div class="crawler-linkback-list" itemscope itemtype="http://schema.org/ItemList">
<div itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
<a itemprop="url" href="../captcha-introduction/734.html">CAPTCHA - Introduction</a>
<meta itemprop="position" content="4">
</div>
</div>
</div>
<div id="post_2" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/pry0cc"><span itemprop="name">pry0cc</span></a>
(Leader &amp; Offsec Engineer &amp; Forum Daddy)
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T12:28:16Z" class="post-time">
July 20, 2016, 12:28pm
</time>
<meta itemprop="dateModified" content="2016-07-20T12:28:16Z">
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Pretty decent article! Have you written your own captcha module?</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="1" />
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
</div>
<div id="post_3" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Nitrax"><span itemprop="name">Nitrax</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T12:31:50Z" class="post-time">
July 20, 2016, 12:31pm
</time>
<meta itemprop="dateModified" content="2016-07-20T12:59:57Z">
<span itemprop="position">3</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote group-VIP" data-username="pry0cc" data-post="2" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/0x00sec.org/pry0cc/40/6_2.png" class="avatar"> pry0cc:</div>
<blockquote>
<p>Have you written your own captcha module?</p>
</blockquote>
</aside>
<p>Did you mean a CAPTCHA generator ?</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="0" />
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
</div>
<div id="post_4" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/oaktree"><span itemprop="name">oaktree</span></a>
(oaktree)
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T15:48:27Z" class="post-time">
July 20, 2016, 3:48pm
</time>
<meta itemprop="dateModified" content="2016-07-20T15:48:27Z">
<span itemprop="position">4</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Wait, hold on.</p>
<p>So what you’ve done here is clear up the image. What I’m missing is… where is the actual character/letter parsing going on and how is that accomplished? Or is that the tessaract module? How does tessaract work?</p>
<p>I saw a lecture once (on the internet) about training a CNN to recognize slightly altered characters/letters…</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="3" />
<span class="post-likes">3 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="2" />
</div>
</div>
<div id="post_5" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/0x00pf"><span itemprop="name">0x00pf</span></a>
(pico)
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T16:27:26Z" class="post-time">
July 20, 2016, 4:27pm
</time>
<meta itemprop="dateModified" content="2016-07-20T16:27:26Z">
<span itemprop="position">5</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote group-VIP" data-username="Nitrax" data-post="1" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/0x00sec.org/nitrax/40/788_2.png" class="avatar"> Nitrax:</div>
<blockquote>
<p>To resolve this issue and reduce the impact of the processing on the string, I calculated the image color threshold, by excluding, prior, pixels close to the white color. Then I replaced the pixels value inferior to this threshold by 255.</p>
</blockquote>
</aside>
<p>In that case it will probably work better to use some <a href="https://en.wikipedia.org/wiki/Mathematical_morphology" rel="nofollow noopener">mathematical morphology</a> or rank filters if you prefer. A combination of erosions and dilatations operators and maybe a median filter at the end should help you to get a clean image. Actually a median filter applied to the result of your processing should remote all that <a href="https://en.wikipedia.org/wiki/Salt-and-pepper_noise" rel="nofollow noopener">salt and pepper noise</a>.</p>
<p>I have a couple of questions:</p>
<ol>
<li>Why do you loop <code>height*4</code> instead of <code>height</code>?. I’m not familiar with the environment you used so may be a stupid question.</li>
<li>What is the Token image in your last example?. This may also be a stupid question <img src="../../images/emoji/twitter/sweat_smile.png%3Fv=9" title=":sweat_smile:" class="emoji" alt=":sweat_smile:">
</li>
</ol>
<p>The threshold algorithm you are using will fail miserably with many images.<a href="https://en.wikipedia.org/wiki/Otsu%27s_Method" rel="nofollow noopener"> Otsu’s method</a> works pretty well in many cases, as it is based on image statistical parameters… well it basically splits the histogram at the right place <img src="../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Congrats. Nice tut mate!</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="3" />
<span class="post-likes">3 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
</div>
<div id="post_6" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Nitrax"><span itemprop="name">Nitrax</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T16:48:05Z" class="post-time">
July 20, 2016, 4:48pm
</time>
<meta itemprop="dateModified" content="2016-07-20T16:48:05Z">
<span itemprop="position">6</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Exactly ! In most case, removing the background is enough for OCR API or libraries to process the image, which is, by the way, well performed by tesseract ! However, in C++, openCV provides a lot of powerful functionalities which improve considerably the recognition performances. Moreover, splitting the image ‘manually’ is only necessary if a failure occurs and quite trivial to develop (processing that I can add to this tut if you find it relevant).</p>
<p>I will not be able to explain to you how works in details tesseract. I just heard that it was one of the most well known OCR library available.</p>
<p>I hope it answers your question.</p>
<p>Best,<br>
Nitrax</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="0" />
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
</div>
<div id="post_7" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Cromical"><span itemprop="name">Cromical</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<link itemprop="image" href="https://0x00sec.s3.amazonaws.com/original/1X/b97015671da309b4fac2beb4a7ff88e95e5b9b91.png">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T16:49:43Z" class="post-time">
July 20, 2016, 4:49pm
</time>
<meta itemprop="dateModified" content="2016-07-20T16:49:43Z">
<span itemprop="position">7</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Isn’t tesseract some kind optical recognition software? Upon further study it does actually seem like a good option. And a good name to boot. (Been supported by Google since 2006) - (Open source since 2005 after Hewlett Packard released it) - (popular on Ubuntu and Windows). And it lacks a GUI, so you’d have to run it from the command line.<br>
Here’s the architecture:<br>
<img src="https://0x00sec.s3.amazonaws.com/original/1X/b97015671da309b4fac2beb4a7ff88e95e5b9b91.png" width="646" height="500"></p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="1" />
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
</div>
<div id="post_8" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Nitrax"><span itemprop="name">Nitrax</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T17:00:00Z" class="post-time">
July 20, 2016, 5:00pm
</time>
<meta itemprop="dateModified" content="2016-07-20T17:00:00Z">
<span itemprop="position">8</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I’m happy to see that you enjoyed this tut mate <img src="../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>You are right about the weakness of the algorithm implemented. In fact, it was more like a proof of concept that something else and this code base can be easily improved by the implementation of the algorithms that you pointed out in your comment.</p>
<aside class="quote no-group" data-username="0x00pf" data-post="5" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/0x00sec.org/0x00pf/40/199_2.png" class="avatar"> 0x00pf:</div>
<blockquote>
<p>Why do you loop height*4 instead of height?. I’m not familiar with the environment you used so may be a stupid question.</p>
</blockquote>
</aside>
<p>This part was weird for me too but the size of the image downloaded and accessible from this callback was simply divided by 4 … I didn’t see anything on the internet about this bug and due to a lack of time, I wasn’t able to dive deeper on this way.</p>
<aside class="quote no-group" data-username="0x00pf" data-post="5" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/0x00sec.org/0x00pf/40/199_2.png" class="avatar"> 0x00pf:</div>
<blockquote>
<p>What is the Token image in your last example?. This may also be a stupid question <img src="../../images/emoji/twitter/sweat_smile.png%3Fv=9" title=":sweat_smile:" class="emoji" alt=":sweat_smile:"></p>
</blockquote>
</aside>
<p>That was just to prove that the tool created was functional and allows to validate this challenge.</p>
<p>P.S : No questions are stupid ^^</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="2" />
<span class="post-likes">2 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
</div>
<div id="post_9" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Nitrax"><span itemprop="name">Nitrax</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T17:03:46Z" class="post-time">
July 20, 2016, 5:03pm
</time>
<meta itemprop="dateModified" content="2016-07-20T17:03:46Z">
<span itemprop="position">9</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Yep, it is and it has been wrapped in several languages e.g. NodeJS, C++, Go, …</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="1" />
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
</div>
<div id="post_10" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Cromical"><span itemprop="name">Cromical</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T17:14:24Z" class="post-time">
July 20, 2016, 5:14pm
</time>
<meta itemprop="dateModified" content="2016-07-20T17:14:24Z">
<span itemprop="position">10</span>
</span>
</div>
<div class="post" itemprop="text">
<p>It’s honestly great. Seems it’s died down though, although I can imagine it being extremely popular in the 2000s.</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="0" />
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
</div>
<div id="post_11" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/0x00pf"><span itemprop="name">0x00pf</span></a>
(pico)
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T17:15:41Z" class="post-time">
July 20, 2016, 5:15pm
</time>
<meta itemprop="dateModified" content="2016-07-20T17:15:41Z">
<span itemprop="position">11</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote group-VIP" data-username="Nitrax" data-post="8" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/0x00sec.org/nitrax/40/788_2.png" class="avatar"> Nitrax:</div>
<blockquote>
<p>This part was weird for me too but the size of the image downloaded and accessible from this callback was simply divided by 4</p>
</blockquote>
</aside>
<p>I would say, the library converts the image to 32bits representation, so you have 4 bytes per pixel. That would mean that what you actually have to multiply by 4 is the width. As you are applying the threshold to each of the pixels components individually it just works, but if you try to get the colour of the pixel you will get something strange.</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="3" />
<span class="post-likes">3 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="2" />
</div>
</div>
<div id="post_12" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Nitrax"><span itemprop="name">Nitrax</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T17:19:51Z" class="post-time">
July 20, 2016, 5:19pm
</time>
<meta itemprop="dateModified" content="2016-07-20T17:19:51Z">
<span itemprop="position">12</span>
</span>
</div>
<div class="post" itemprop="text">
<p>I didn’t think about that. Thanks for your input ! You solved it <img src="../../images/emoji/twitter/wink.png%3Fv=9" title=":wink:" class="emoji" alt=":wink:"></p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="1" />
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
</div>
<div id="post_13" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Nitrax"><span itemprop="name">Nitrax</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T17:29:10Z" class="post-time">
July 20, 2016, 5:29pm
</time>
<meta itemprop="dateModified" content="2016-07-20T17:29:10Z">
<span itemprop="position">13</span>
</span>
</div>
<div class="post" itemprop="text">
<p>A lot of CAPTCHA used nowadays are, security speaking, as poor as the examples above ^^ I know it’s a shame but it’s the reality ^^</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="1" />
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="1" />
</div>
</div>
<div id="post_14" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/oaktree"><span itemprop="name">oaktree</span></a>
(oaktree)
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T17:52:52Z" class="post-time">
July 20, 2016, 5:52pm
</time>
<meta itemprop="dateModified" content="2016-07-20T17:52:52Z">
<span itemprop="position">14</span>
</span>
</div>
<div class="post" itemprop="text">
<aside class="quote no-group" data-username="0x00pf" data-post="11" data-topic="764">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/0x00sec.org/0x00pf/40/199_2.png" class="avatar"> 0x00pf:</div>
<blockquote>
<p>I would say, the library converts the image to 32bits representation, so you have 4 bytes per pixel.</p>
</blockquote>
</aside>
<p>Yeah. Probably R G B A, then – a byte for each.</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="1" />
<span class="post-likes">1 Like</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
</div>
<div id="post_15" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/Cromical"><span itemprop="name">Cromical</span></a>
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-07-20T18:43:06Z" class="post-time">
July 20, 2016, 6:43pm
</time>
<meta itemprop="dateModified" content="2016-07-20T18:43:06Z">
<span itemprop="position">15</span>
</span>
</div>
<div class="post" itemprop="text">
<p>Yes, sad really. <img src="../../images/emoji/twitter/frowning.png%3Fv=9" title=":frowning:" class="emoji" alt=":frowning:"></p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="0" />
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
</div>
<div id="post_16" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/system"><span itemprop="name">system</span></a>
(system)
Closed
</span>
<link itemprop="mainEntityOfPage" href="764.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2018-01-21T00:30:20Z" class="post-time">
January 21, 2018, 12:30am
</time>
<meta itemprop="dateModified" content="2018-01-21T00:30:20Z">
<span itemprop="position">16</span>
</span>
</div>
<div class="post" itemprop="text">
<p>This topic was automatically closed after 30 days. New replies are no longer allowed.</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="0" />
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
</div>
</div>
</div>
<footer class="container wrap">
<nav class="crawler-nav">
<ul>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../index.html" itemprop="url">Home </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../categories.html" itemprop="url">Categories </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="https://0x00sec.org/guidelines" itemprop="url">FAQ/Guidelines </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../tos.html" itemprop="url">Terms of Service </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../privacy.html" itemprop="url">Privacy Policy </a>
</span>
</li>
</ul>
</nav>
<p class="powered-by-link">Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>
<script src="https://instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
</body>
</html>
