<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>C# basic File Transfer TCP/IP - Programming - 0x00sec - The Home of the Hacker</title>
    <meta name="description" content="hy all today i will show you how to make a basic File Transfer console app. 
this is just to show you how easy it is to receive and send files in c#.net. 
dlls 
using System;
using System.Net;
using System.Net.Sockets;
u&amp;hellip;">
    <meta name="generator" content="Discourse 3.6.0.beta2-latest - https://github.com/discourse/discourse version 3b1964f3ed8bdc2f181e2abccb1b116e4b814db5">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/30c4e7d76acf879a124fdfe4d8d126afe628c189_2_32x32.html">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e_2_180x180.html">
<meta name="theme-color" media="all" content="#171616">

<meta name="color-scheme" content="dark">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="1199.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="0x00sec - The Home of the Hacker Search">

    
    <link href="../../stylesheets/color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4.css_%3b%20filename_%3dUTF-8%27%27color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="15"/>

<link href="../../stylesheets/common_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27common_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common"  />

  <link href="../../stylesheets/mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile"  />
  <link href="../../stylesheets/desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop"  />



    <link href="../../stylesheets/chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="chat"  />
    <link href="../../stylesheets/checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="../../stylesheets/discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
    <link href="../../stylesheets/discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="../../stylesheets/discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="../../stylesheets/discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="../../stylesheets/discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="../../stylesheets/discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="../../stylesheets/discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="../../stylesheets/discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="../../stylesheets/discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="../../stylesheets/docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="../../stylesheets/footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="../../stylesheets/poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="poll"  />
    <link href="../../stylesheets/spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="../../stylesheets/chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="chat_mobile"  />
    <link href="../../stylesheets/discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-solved_mobile"  />
    <link href="../../stylesheets/discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-topic-voting_mobile"  />
    <link href="../../stylesheets/chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="chat_desktop"  />
    <link href="../../stylesheets/discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="../../stylesheets/poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="poll_desktop"  />

  <link href="../../stylesheets/common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960db.css_%3b%20filename_%3dUTF-8%27%27common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960dba97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="57" data-theme-name="0x00sec-v2"/>
    <link href="../../stylesheets/mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38.css_%3b%20filename_%3dUTF-8%27%27mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile_theme" data-theme-id="4" data-theme-name="mobile chrome"/>
    <link href="../../stylesheets/desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop_theme" data-theme-id="46" data-theme-name="header links v2"/>

    <link rel="stylesheet" href="../../../external.html?link=https://s3.amazonaws.com/0x00sec/monokai-sublime.css">
<script src="../../../external.html?link=https://s3.amazonaws.com/0x00sec/highlight.pack.js" nonce="CqT0HUGjAu7wxSP2aJ3j9JkLE"></script>
<script defer="" src="../../theme-javascripts/05954ff525aceb8daa8b585f92d758d311ae7077.js_%3b%20filename_%3dUTF-8%27%2705954ff525aceb8daa8b585f92d758d311ae7077a97f.js?__ws=d.clarkee.co.uk" data-theme-id="40" nonce="CqT0HUGjAu7wxSP2aJ3j9JkLE"></script>
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;C# basic File Transfer TCP/IP&#39;" href="1199.rss" />
    <meta property="og:site_name" content="0x00sec - The Home of the Hacker" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://d.clarkee.co.uk/uploads/default/original/2X/2/27a5373af868edade07624e8205c46e79c247445.jpeg" />
<meta property="og:image" content="https://d.clarkee.co.uk/uploads/default/original/2X/2/27a5373af868edade07624e8205c46e79c247445.jpeg" />
<meta property="og:url" content="https://d.clarkee.co.uk/t/c-basic-file-transfer-tcp-ip/1199" />
<meta name="twitter:url" content="https://d.clarkee.co.uk/t/c-basic-file-transfer-tcp-ip/1199" />
<meta property="og:title" content="C# basic File Transfer TCP/IP" />
<meta name="twitter:title" content="C# basic File Transfer TCP/IP" />
<meta property="og:description" content="hy all today i will show you how to make a basic File Transfer console app.  this is just to show you how easy it is to receive and send files in c#.net.  dlls  using System; using System.Net; using System.Net.Sockets; using System.IO;  First off we default settings          //settings         bool mode;//mode [true send] [false receive]         string output_PATH = @&quot;Download\&quot;;//files gotten         int BytesPerRead = 1024;//bytes to read and then write  OK now for the entry point of the progr..." />
<meta name="twitter:description" content="hy all today i will show you how to make a basic File Transfer console app.  this is just to show you how easy it is to receive and send files in c#.net.  dlls  using System; using System.Net; using System.Net.Sockets; using System.IO;  First off we default settings          //settings         bool mode;//mode [true send] [false receive]         string output_PATH = @&quot;Download\&quot;;//files gotten         int BytesPerRead = 1024;//bytes to read and then write  OK now for the entry point of the progr..." />
<meta property="og:article:section" content="Programming" />
<meta property="og:article:section:color" content="92278F" />
<meta property="og:article:tag" content="networking" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 â¤" />
<meta property="article:published_time" content="2016-10-13T02:28:22+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    <div id="top-navbar" class="container">
<span id="top-navbar-links" style="display:none;">
  <!--<a href="https://git.0x00sec.org" class="dow-menu">GitLab</a>  
  <a href="https://blog.0x00sec.org/irc" class="dow-menu">IRC</a>!-->
  <a href="../../../external.html?link=https://init.0x00sec.org/" class="dow-menu">Init</a>
  <a href="../../../external.html?link=https://discord.gg/c6BHVfn" class="dow-menu">Discord</a>
  <a href="../../../external.html?link=https://init.0x00sec.org/?partners" class="dow-menu">Partners</a>
</span>
</div>
    <header>
  <a href="../../index.html">0x00sec - The Home of the Hacker</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="1199.html">C# basic File Transfer TCP/IP</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/programming/61.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #92278F'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Programming</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/networking.html' class='discourse-tag' rel="tag">networking</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='../../../external.html?link=http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='C# basic File Transfer TCP/IP'>
      <link itemprop='url' href='1199.html'>
      <meta itemprop='datePublished' content='2016-10-13T02:28:22Z'>
        <meta itemprop='articleSection' content='Programming'>
      <meta itemprop='keywords' content='networking'>
      <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
        <meta itemprop='name' content='0x00sec - The Home of the Hacker'>
          <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
            <meta itemprop='url' content='../../uploads/default/original/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e.html'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/dedady157.html'><span itemprop='name'>dedady157</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="1199.html">


              <span class="crawler-post-infos">
                  <time  datetime='2016-10-13T02:28:22Z' class='post-time'>
                    October 13, 2016,  2:28am
                  </time>
                  <meta itemprop='dateModified' content='2016-10-13T10:48:18Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>hy all today i will show you how to make a basic File Transfer console app.<br>
this is just to show you how easy it is to receive and send files in c#.net.</p>
<p>dlls</p>
<pre><code class="lang-auto">using System;
using System.Net;
using System.Net.Sockets;
using System.IO;
</code></pre>
<p>First off we default settings</p>
<pre><code class="lang-auto">        //settings
        bool mode;//mode [true send] [false receive]
        string output_PATH = @"Download\";//files gotten
        int BytesPerRead = 1024;//bytes to read and then write
</code></pre>
<p>OK now for the entry point of the programm.</p>
<pre><code class="lang-auto">public void START()//ENTRYPOINT
        {
            Console.Clear();
            Console.Title = "File Transfer TCP/IP";
            Console.ForegroundColor = ConsoleColor.DarkGreen;
            Console.BackgroundColor = ConsoleColor.Black;

            if (!Directory.Exists(output_PATH))
                Directory.CreateDirectory(output_PATH);

            SET_SETTING_MODE();
            if (mode)
            {
                SendFile();
            }
            else
            {
                ReciveFile();
            }
        }
</code></pre>
<p>helpers help so here are mine</p>
<pre><code class="lang-auto"> int Get_port()
        {
            AGEN:
            Console.Clear();
            Console.WriteLine("&gt;Port?");
            Console.Write("&lt;");
            string input = Console.ReadLine();
            try
            {
                int port = Int32.Parse(input);
                if (port &lt;= 65534 &amp;&amp; port &gt; 1204)
                {
                    return port;
                }
                else goto AGEN;
            }
            catch
            {
                goto AGEN;
            }
        }//gets user input and validates it as a port

        private string _getip()
        {
            IPHostEntry host;
            string localIP = "?";
            host = Dns.GetHostEntry(Dns.GetHostName());
            foreach (IPAddress ip in host.AddressList)
            {
                if (ip.AddressFamily == AddressFamily.InterNetwork)
                {
                    localIP = ip.ToString();
                }
            }
            return localIP;
        }//gets this machine ip

        private void SET_SETTING_MODE()
        {
        FIRST:
            Console.Clear();
            Console.WriteLine("&gt;Do you whant to recive or send files [r/s]");
            Console.Write("&lt;");
            string input = Console.ReadLine();
            if (input.StartsWith("r"))
            {
                mode = false;
            }
            else if (input.StartsWith("s"))
            {
                mode = true;
            }
            else
                goto FIRST;
        }
</code></pre>
<p>sending files easy just messy</p>
<pre><code class="lang-auto">void SendFile()
        {
        top:
            Console.Clear();
            Console.WriteLine("&gt;FILE to upload?");
            Console.Write("&lt;");
            string file = Console.ReadLine();
            if (File.Exists(file))
            {
            AGEN:
                Console.Clear();
                Console.WriteLine("&gt;IP to send to");
                Console.Write("&lt;");
                string ip = Console.ReadLine();
                try
                {
                    IPAddress.Parse(ip);
                }
                catch
                {
                    goto AGEN;
                }
                int port = Get_port();

                //sending file
                Console.Clear();
                Console.WriteLine("&gt;Connecting");
                TcpClient soc = new TcpClient(ip, port);
                Console.WriteLine("&gt;Connected");
                Console.WriteLine("&gt;Sending File");
                Console.WriteLine("&gt;" + file);
                Console.WriteLine("&gt;To ip:" + ip + "   port:" + port);
                soc.Client.SendFile(file);
                Console.WriteLine("&gt;Done");
                Console.WriteLine("&gt;Closeing port");
                soc.Close();
                Console.WriteLine("&gt;Done");


            }
            else
                goto top;
        }//send file to ip (tcp/ip)
</code></pre>
<p>now still easy but a bit harder receiving files there isnâ€™t an easy way there in no function / method to do this for you but the concept is simple the {SOCKET.SendFile(Filename)} straight up sends the file data it reads the file and sends the bytes to the endpoint (other pc) so we just have to take those bytes and write them to a file but we donâ€™t get a file name so well just put them in (Data) with no file type so the user can just rename the file and add the right file type chat aside lets do this.</p>
<pre><code class="lang-auto">void ReciveFile()
        {

            int port = Get_port();
            Console.WriteLine("&gt;Getting ip");
            string ip = _getip();
            Console.WriteLine("&gt;Opening port:" + port);
            TcpListener listener = new TcpListener(IPAddress.Any,100);//bypass Compiler
            try
            {
                listener = new TcpListener(IPAddress.Parse(ip), port);
            }
            catch
            {
                Console.WriteLine("&gt;ERRROR failed to open port");
                Console.ReadLine();
                Environment.Exit(0);
            }
            Console.WriteLine("&gt;Port open");
            Console.WriteLine("&gt;Waiting for connection on");
            Console.WriteLine("&gt;ip  :" + ip);
            Console.WriteLine("&gt;port:" + port);

            //wait for sender
            listener.Start();
            while (true)
            {

                if (listener.Pending())
                {
                    break;
                }
            }

            here you receive the file
            using (var client = listener.AcceptTcpClient())
            using (var stream = client.GetStream())
            using (var output = File.Create(output_PATH + @"\Data"))
            {

                Console.WriteLine("&gt;connected :" + client.Client.LocalEndPoint.ToString());
                Console.WriteLine("&gt;reciving Data");

                // read the file in chunks of 1KB (as default)
                var buffer = new byte[BytesPerRead];
                int bytesRead;
                while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) &gt; 0)
                {
                    output.Write(buffer, 0, bytesRead);
                }
            }


            Console.WriteLine("&gt;File recived");
            Console.WriteLine("&gt;Closeing port");
            listener.Stop();
            Console.WriteLine("&gt;Data at");
            Console.WriteLine("&gt;" + output_PATH + @"\Data");
            Console.ReadLine();
        }//reciver file from (SendFile) (tcp/ip)
</code></pre>
<p>and now the full class (i will make a dll to help with file transfer in c# later on tho)</p>
<pre><code class="lang-auto">class FILE_TRANSFER
    {
        //settings
        bool mode;//mode [true send] [fasle recive]
        string output_PATH = @"Download\";//files goten
        int BytesPerRead = 1024;//bytes to read and then write

        public void START()//ENTRYPOINT
        {
            Console.Clear();
            Console.Title = "File Transfer TCP/IP";
            Console.ForegroundColor = ConsoleColor.DarkGreen;
            Console.BackgroundColor = ConsoleColor.Black;

            if (!Directory.Exists(output_PATH))
                Directory.CreateDirectory(output_PATH);

            SET_SETTING_MODE();
            if (mode)
            {
                SendFile();
            }
            else
            {
                ReciveFile();
            }
        }
        
        //file crap
        void ReciveFile()
        {

            int port = Get_port();
            Console.WriteLine("&gt;Getting ip");
            string ip = _getip();
            Console.WriteLine("&gt;Opening port:" + port);
            TcpListener listener = new TcpListener(IPAddress.Any,100);//bypass Compiler
            try
            {
                listener = new TcpListener(IPAddress.Parse(ip), port);
            }
            catch
            {
                Console.WriteLine("&gt;ERRROR failed to open port");
                Console.ReadLine();
                Environment.Exit(0);
            }
            Console.WriteLine("&gt;Port open");
            Console.WriteLine("&gt;Waiting for connection on");
            Console.WriteLine("&gt;ip  :" + ip);
            Console.WriteLine("&gt;port:" + port);

            listener.Start();
            while (true)
            {

                if (listener.Pending())
                {
                    break;
                }
            }


            using (var client = listener.AcceptTcpClient())
            using (var stream = client.GetStream())
            using (var output = File.Create(output_PATH + @"\Data"))
            {

                Console.WriteLine("&gt;connected :" + client.Client.LocalEndPoint.ToString());
                Console.WriteLine("&gt;reciving Data");

                // read the file in chunks of 1KB
                var buffer = new byte[BytesPerRead];
                int bytesRead;
                while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) &gt; 0)
                {
                    output.Write(buffer, 0, bytesRead);
                }
            }


            Console.WriteLine("&gt;File recived");
            Console.WriteLine("&gt;Closeing port");
            listener.Stop();
            Console.WriteLine("&gt;Data at");
            Console.WriteLine("&gt;" + output_PATH + @"\Data");
            Console.ReadLine();
        }//reciver file from (SendFile) (tcp/ip)
        void SendFile()
        {
        top:
            Console.Clear();
            Console.WriteLine("&gt;FILE to upload?");
            Console.Write("&lt;");
            string file = Console.ReadLine();
            if (File.Exists(file))
            {
            AGEN:
                Console.Clear();
                Console.WriteLine("&gt;IP to send to");
                Console.Write("&lt;");
                string ip = Console.ReadLine();
                try
                {
                    IPAddress.Parse(ip);
                }
                catch
                {
                    goto AGEN;
                }
                int port = Get_port();

                //sending file
                Console.Clear();
                Console.WriteLine("&gt;Connecting");
                TcpClient soc = new TcpClient(ip, port);
                Console.WriteLine("&gt;Connected");
                Console.WriteLine("&gt;Sending File");
                Console.WriteLine("&gt;" + file);
                Console.WriteLine("&gt;To ip:" + ip + "   port:" + port);
                soc.Client.SendFile(file);
                Console.WriteLine("&gt;Done");
                Console.WriteLine("&gt;Closeing port");
                soc.Close();
                Console.WriteLine("&gt;Done");


            }
            else
                goto top;
        }//send file to ip (tcp/ip)

        int Get_port()
        {
            AGEN:
            Console.Clear();
            Console.WriteLine("&gt;Port?");
            Console.Write("&lt;");
            string input = Console.ReadLine();
            try
            {
                int port = Int32.Parse(input);
                if (port &lt;= 65534 &amp;&amp; port &gt; 0)
                {
                    return port;
                }
                else goto AGEN;
            }
            catch
            {
                goto AGEN;
            }
        }//gets user input and validates it as a port
        private string _getip()
        {
            IPHostEntry host;
            string localIP = "?";
            host = Dns.GetHostEntry(Dns.GetHostName());
            foreach (IPAddress ip in host.AddressList)
            {
                if (ip.AddressFamily == AddressFamily.InterNetwork)
                {
                    localIP = ip.ToString();
                }
            }
            return localIP;
        }
        private void SET_SETTING_MODE()
        {
        FIRST:
            Console.Clear();
            Console.WriteLine("&gt;Do you whant to recive or send files [r/s]");
            Console.Write("&lt;");
            string input = Console.ReadLine();
            if (input.StartsWith("r"))
            {
                mode = false;
            }
            else if (input.StartsWith("s"))
            {
                mode = true;
            }
            else
                goto FIRST;
        }
    }
</code></pre>
<p>thats all for to day.<br>
i hope you learnt how to send and receive files via tcp/ip</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>


            
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/dtm.html'><span itemprop='name'>dtm</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2016-10-13T03:11:16Z' class='post-time'>
                    October 13, 2016,  3:11am
                  </time>
                  <meta itemprop='dateModified' content='2016-10-13T14:05:41Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Just a suggestion, you should probably look over some material before publishing your code for others to read. Highly recommend you research further into what DLLs and classes are, <a href="../../../external.html?link=https://msdn.microsoft.com/en-us/library/ff926074.aspx">C# code styling</a>, OOP, high level languages and <code>goto</code> statements and networking programming (the maximum port number is 65535 and you really should not use anything below port 1025).</p>
<p>To be honest, I donâ€™t even know why the <code>goodcode</code> tag is a thing.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>


            
          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/dedady157.html'><span itemprop='name'>dedady157</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2016-10-13T10:45:05Z' class='post-time'>
                    October 13, 2016, 10:45am
                  </time>
                  <meta itemprop='dateModified' content='2016-10-13T10:45:05Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>i made the programm just because i wanted to show how you can receive and send files in c#.net<br>
the programm was a quick thing i made, So people can copy and compile the code, To understand how it works better, I donâ€™t care if the whole programm is bad i made it in under 30 min, Its quick and tacky.</p>
<p>ps: never use 65535 as a port it triggers some anti viruses</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>


            
          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/dtm.html'><span itemprop='name'>dtm</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2016-10-13T11:44:27Z' class='post-time'>
                    October 13, 2016, 11:44am
                  </time>
                  <meta itemprop='dateModified' content='2016-10-13T14:06:59Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Do what you want but I would really rather you not give off the wrong idea to those lesser knowledgeable readers like what youâ€™ve done in the following:</p>
<aside class="quote no-group" data-username="dedady157" data-post="1" data-topic="1199">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../letter_avatar_proxy/v4/letter/d/f04885/48.png" class="avatar"> dedady157:</div>
<blockquote>
<p>dlls</p>
<p>using System;<br>
using <a href="../../../external.html?link=http://system.net/">System.Net</a>;<br>
using System.Net.Sockets;<br>
using <a href="../../../external.html?link=http://system.io/">System.IO</a>;</p>
</blockquote>
</aside>
<p>These are <em>not</em> DLLs.</p>
<p>I donâ€™t care if you donâ€™t care but I care about the accuracy of the content that are provided to the readers. Itâ€™d be even better if the quality of at least the basics (consistent code styling, avoiding <code>goto</code> statements in high level languages, etc.) is also maintained.</p>
<p>The suggestions I provided were for your self-improvement. If you donâ€™t want to read up and educate yourself then thatâ€™s your problem.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="3" />
              <span class='post-likes'>3 Likes</span>
            </div>


            
          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../index.html' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../categories.html' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../guidelines.html' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    <script src="../../../external.html?link=http://instant.page/3.0.0" type="module" defer="" integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1" nonce="CqT0HUGjAu7wxSP2aJ3j9JkLE"></script>
  </body>
  
</html>
