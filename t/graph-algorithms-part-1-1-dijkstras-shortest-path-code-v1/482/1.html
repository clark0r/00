<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Graph Algorithms (Part 1.1): Dijkstra&#39;s Shortest Path [Code v1] - Algorithms - 0x00sec - The Home of the Hacker</title>
<meta name="description" content="Hey 0x00sec people! Not long ago, I said I would put up some source code for Dijkstra‚Äôs Algorithm. Today, I‚Äôll be showing you just one way to do it. We‚Äôll be utilizing an Adjacency Matrix, which is simply a 2D Array. As &amp;hellip;">
<meta name="generator" content="Discourse 3.1.0.beta6 - https://github.com/discourse/discourse version 80a1709965fa59da824b2e3392976fc6fc898f80">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/2X/3/30c4e7d76acf879a124fdfe4d8d126afe628c189_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e_2_180x180.png">
<meta name="theme-color" media="all" content="#171616">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../482.html" />
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="0x00sec - The Home of the Hacker Search">
<link href="../../../stylesheets/color_definitions_0x00sec-v2_15_57_a5ef387651921c3e4c7aa1108536015ba8299efb.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" class="light-scheme" />
<link href="../../../stylesheets/desktop_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="desktop" />
<link href="../../../stylesheets/chat_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="chat" />
<link href="../../../stylesheets/discourse-details_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-details" />
<link href="../../../stylesheets/discourse-lazy-videos_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-lazy-videos" />
<link href="../../../stylesheets/discourse-local-dates_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-local-dates" />
<link href="../../../stylesheets/discourse-narrative-bot_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-narrative-bot" />
<link href="../../../stylesheets/discourse-presence_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-presence" />
<link href="../../../stylesheets/discourse-spoiler-alert_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="discourse-spoiler-alert" />
<link href="../../../stylesheets/docker_manager_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="docker_manager" />
<link href="../../../stylesheets/poll_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="poll" />
<link href="../../../stylesheets/chat_desktop_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="chat_desktop" />
<link href="../../../stylesheets/poll_desktop_87cd179c68f77a1d2535709c09116ecd05093b39.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="poll_desktop" />
<link href="../../../stylesheets/desktop_theme_46_f36ade55bf80933494fe3b5fab518f477de3bd4e.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="46" data-theme-name="header links v2" />
<link href="../../../stylesheets/desktop_theme_57_8c0e890a61cdb4c5833a9f9c96664ed164e7d645.css%3F__ws=0x00sec.org.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="57" data-theme-name="0x00sec-v2" />
<link rel="stylesheet" href="https://s3.amazonaws.com/0x00sec/monokai-sublime.css">
<script src="https://s3.amazonaws.com/0x00sec/highlight.pack.js"></script>
<link rel="preload" href="../../../theme-javascripts/440fd21108f5ba9e5dfe06cca9fc842569d5a874.js%3F__ws=0x00sec.org" as="script">
<script defer src="../../../theme-javascripts/440fd21108f5ba9e5dfe06cca9fc842569d5a874.js%3F__ws=0x00sec.org" data-theme-id="40"></script>
<link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Graph Algorithms (Part 1.1): Dijkstra&#39;s Shortest Path [Code v1]&#39;" href="../482.rss" />
<meta property="og:site_name" content="0x00sec - The Home of the Hacker" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://0x00sec.s3.amazonaws.com/original/1X/446c623541ed9008901f76c1b05ff5526f4fcee0.png" />
<meta property="og:image" content="https://0x00sec.s3.amazonaws.com/original/1X/446c623541ed9008901f76c1b05ff5526f4fcee0.png" />
<meta property="og:url" content="https://0x00sec.org/t/graph-algorithms-part-1-1-dijkstras-shortest-path-code-v1/482/1" />
<meta name="twitter:url" content="https://0x00sec.org/t/graph-algorithms-part-1-1-dijkstras-shortest-path-code-v1/482/1" />
<meta property="og:title" content="Graph Algorithms (Part 1.1): Dijkstra&#39;s Shortest Path [Code v1]" />
<meta name="twitter:title" content="Graph Algorithms (Part 1.1): Dijkstra&#39;s Shortest Path [Code v1]" />
<meta property="og:description" content="Hey 0x00sec people! Not long ago, I said I would put up some source code for Dijkstra‚Äôs Algorithm. Today, I‚Äôll be showing you just one way to do it. We‚Äôll be utilizing an Adjacency Matrix, which is simply a 2D Array. As we progress, each implementation will be more efficient than the last.  Taking a page from @dtm‚Äôs book, this post is best understood when the reader has:  Intermediate C++ Skills read the first article  Representation of A Graph The first step in implementing any algorithm is und..." />
<meta name="twitter:description" content="Hey 0x00sec people! Not long ago, I said I would put up some source code for Dijkstra‚Äôs Algorithm. Today, I‚Äôll be showing you just one way to do it. We‚Äôll be utilizing an Adjacency Matrix, which is simply a 2D Array. As we progress, each implementation will be more efficient than the last.  Taking a page from @dtm‚Äôs book, this post is best understood when the reader has:  Intermediate C++ Skills read the first article  Representation of A Graph The first step in implementing any algorithm is und..." />
<meta property="og:article:section" content="Algorithms" />
<meta property="og:article:section:color" content="AB9364" />
<meta property="og:article:tag" content="algorithm" />
<meta property="og:article:tag" content="shortestpath" />
<meta property="og:article:tag" content="graphtheory" />
<meta property="og:article:tag" content="dijkstra" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="4 ‚ù§" />
<meta property="article:published_time" content="2016-05-25T01:34:54+00:00" />
<meta property="og:ignore_canonical" content="true" />
</head>
<body class="crawler ">
<div id="top-navbar" class="container">
<span id="top-navbar-links" style="display:none;">

<a href="https://init.0x00sec.org" class="dow-menu">Init</a>
<a href="https://discord.gg/c6BHVfn" class="dow-menu">Discord</a>
<a href="https://init.0x00sec.org/?partners" class="dow-menu">Partners</a>
</span>
</div>
<header>
<a href="../../../index.html">
0x00sec - The Home of the Hacker
</a>
</header>
<div id="main-outlet" class="wrap" role="main">
<div id="topic-title">
<h1>
<a href="../482.html">Graph Algorithms (Part 1.1): Dijkstra&#39;s Shortest Path [Code v1]</a>
</h1>
<div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
<span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
<a href="../../../c/algorithms/70.html" class="badge-wrapper bullet" itemprop="item">
<span class="badge-category-bg" style="background-color: #AB9364"></span>
<span class="badge-category clear-badge">
<span class="category-name" itemprop="name">Algorithms</span>
</span>
</a>
<meta itemprop="position" content="1" />
</span>
</div>
<div class="topic-category">
<div class="discourse-tags list-tags">
<a href="../../../tag/algorithm.html" class="discourse-tag" rel="tag">algorithm</a>,
<a href="../../../tag/shortestpath.html" class="discourse-tag" rel="tag">shortestpath</a>,
<a href="../../../tag/graphtheory.html" class="discourse-tag" rel="tag">graphtheory</a>,
<a href="../../../tag/dijkstra.html" class="discourse-tag" rel="tag">dijkstra</a>
</div>
</div>
</div>
<div itemscope itemtype="http://schema.org/DiscussionForumPosting">
<meta itemprop="headline" content="Graph Algorithms (Part 1.1): Dijkstra&#39;s Shortest Path [Code v1]">
<meta itemprop="articleSection" content="Algorithms">
<meta itemprop="keywords" content="algorithm, shortestpath, graphtheory, dijkstra">
<div itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="0x00sec - The Home of the Hacker">
<div itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
<meta itemprop="url" content="https://0x00sec.org/uploads/default/original/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e.png">
</div>
</div>
<div id="post_1" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/oaktree"><span itemprop="name">oaktree</span></a>
(oaktree)
</span>
<link itemprop="mainEntityOfPage" href="../482.html">
<link itemprop="image" href="https://0x00sec.s3.amazonaws.com/original/1X/446c623541ed9008901f76c1b05ff5526f4fcee0.png">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2016-05-25T01:34:54Z" class="post-time">
May 25, 2016, 1:34am
</time>
<meta itemprop="dateModified" content="2016-05-25T01:40:05Z">
<span itemprop="position">1</span>
</span>
</div>
<div class="post" itemprop="articleBody">
<p>Hey 0x00sec people! Not long ago, I said I would put up some source code for Dijkstra‚Äôs Algorithm. Today, I‚Äôll be showing you just <em>one</em> way to do it. We‚Äôll be utilizing an <strong>Adjacency Matrix</strong>, which is simply a 2D Array. <em>As we progress, each implementation will be more efficient than the last.</em></p>
<p>Taking a page from <a class="mention" href="https://0x00sec.org/u/dtm">@dtm</a>‚Äôs book, this post is best understood when the reader has:</p>
<pre><code>Intermediate C++ Skills
read the first article
</code></pre>
<h1>Representation of A Graph</h1>
<p>The first step in implementing any algorithm is understanding how to represent relevant data in a computer. So, how would we represent a graph in memory?</p>
<p>There are really just two ways:</p>
<ol>
<li>Adjacency Matrix</li>
<li>Adjacency List</li>
</ol>
<p>Today, we‚Äôre going to use the first one. Take a look at the image below:</p>
<p><img src="https://0x00sec.s3.amazonaws.com/original/1X/446c623541ed9008901f76c1b05ff5526f4fcee0.png" alt="matrix and graph representation"></p>
<p>On the left, what is shown is a graph much like the one from the <a href="../../graph-algorithms-part-1-0-dijkstras-shortest-path-concept/419.html">first part of this series</a>. To the right of that graph is its corresponding representation in an adjacency matrix.</p>
<p>This particular adjacency matrix is a Boolean one: a <code>1</code> means that an edge connects the two nodes. A matrix‚Äôs values can also be used to keep track of distances.</p>
<blockquote>
<p>Note: A matrix is represented in computer as a 2D array. The outer array makes up the rows; the inner the columns. Generally: <code>some_matrix[row][col]</code>.</p>
</blockquote>
<hr>
<h1>Let‚Äôs Start Coding</h1>
<pre><code class="lang-java">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;limits&gt;

int dijkstra(std::vector&lt; std::vector&lt;int&gt; &gt;&amp; matrix, int start, int end) {

	std::vector&lt;int&gt; distances(matrix.size()), previous(matrix.size());
	std::vector&lt;int&gt; nodes, path;

        // ...
</code></pre>
<p>We include our headers and then declare the function <code>dijkstra</code>. This function takes, as parameters, an adjacency matrix represented by a 2D <code>std::vector</code>, a starting point, and an ending point. The start/end points are assumed to be from a zero-based index.</p>
<p>Then, we declare a few more vectors.</p>
<ul>
<li>
<code>distances</code> will keep track of the distance between each node and the <code>start</code> node.</li>
<li>
<code>previous</code> keeps track of the order of visitation of the nodes.</li>
<li>
<code>nodes</code> is a <code>std::vector&lt;int&gt;</code> containing all of the nodes.</li>
<li>
<code>path</code> is simply the path to take from <code>start</code> to <code>end</code>. It‚Äôs empty because we have yet to find the path.</li>
</ul>
<pre><code class="lang-java">       // ...

        for (int i = 0, n = matrix[start].size(); i &lt; n; i++) {

		if (i == start)
			distances[i] = 0;
		else
			distances[i] = std::numeric_limits&lt;int&gt;::max();

		nodes.push_back(i);
	}

        // ...
</code></pre>
<p>We now go through each node, and set the distance to ‚Äúinfinity,‚Äù represented by the maximum value of an integer (<code>numeric_limits&lt;int&gt;::max()</code>). <em>But</em>, if the <code>i</code>th node is our <code>start</code> node, we set the distance to <code>0</code>. We then <code>push_back</code> each node.</p>
<pre><code class="lang-java">        // ...
        auto comp = [&amp;](int l, int r) {return distances[l] &gt; distances[r];};
	std::sort(nodes.begin(), nodes.end(), comp);

        // ...
</code></pre>
<p>Okay, that first line there seems a little daunting. Basically, we create a custom comparator, so that we can sort <code>nodes</code> by the distance between each node and <code>start</code>, with the smallest distances at the end, or back, of <code>nodes</code>.</p>
<pre><code class="lang-java">        // ...
        while(!nodes.empty()) {
		int smallest = nodes.back();
		nodes.pop_back();

		if (smallest == end) {

			while(smallest != start) {

				path.push_back(smallest);
				smallest = previous[smallest];
			}
			
			path.push_back(start);
			std::reverse(path.begin(), path.end());
			break;
		}

		if (distances[smallest] == std::numeric_limits&lt;int&gt;::max())
			break;

		for(int i = 0, n = matrix[smallest].size(); i &lt; n; i++) {
			int tmp = distances[smallest] + matrix[smallest][i];
			
			if (tmp &lt; 0)
				tmp = std::numeric_limits&lt;int&gt;::max();
				// combat integer overflow!
			
			if (tmp &lt; distances[i]) {
				distances[i] = tmp;
				previous[i] = smallest;

				std::sort(nodes.begin(), nodes.end(), comp);
			}
		}
	}
        // ...
</code></pre>
<p>Now we enter a <code>while</code> loop, which says, ‚Äúwhile we still have nodes‚Ä¶‚Äù The first thing we‚Äôre going to do is take the smallest node in <code>nodes</code> and ‚Äúvisit‚Äù it by popping it off of <code>nodes</code> and storing it in <code>smallest</code>.</p>
<p>Skip those first two <code>if</code>s and go to that <code>for</code> loop. This loop says, ‚Äúfor each node connected to <code>smallest</code>, do‚Ä¶‚Äù</p>
<p>In the loop, we first make a variable <code>tmp</code> equal to the sum of <code>distances[smallest]</code> and <code>matrix[smallest][i]</code>. This means, <code>tmp</code> is equal to the distance from <code>start</code> to <code>smallest</code> plus the distance from <code>smallest</code> to node <code>i</code>. <code>tmp</code> is, therefore, a possible distance from <code>start</code> to node <code>i</code>. But, we only want to use this distance if it‚Äôs less than the one we <em>already</em> may have.</p>
<p>First, let‚Äôs make sure we didn‚Äôt add <code>numeric_limits&lt;int&gt;::max()</code> to some number above zero and accidentally overflow <code>tmp</code> to the negatives. We correct <code>tmp</code> to <code>numeric_limits&lt;int&gt;::max()</code> if we <em>did</em> overflow it.</p>
<p>Now we‚Äôre at the second <code>if</code> in the <code>for</code> loop. If <code>tmp</code> is smaller than <code>distances[i]</code>, it means that we have found a better route from <code>start</code> to <code>i</code>. So, we update the distance and record that the node we visit before <code>i</code> should be <code>smallest</code>. Since we have updated a distance, we also need to re<code>sort</code> <code>nodes</code>.</p>
<p>Okay, let‚Äôs go back to the first <code>if</code> in the <code>while</code> loop. If/when we reach the end, the code inside this <code>if</code> runs. We build up the <code>path</code> by calling on previous, and then recursively defining <code>smallest</code> as the <code>smallest</code> that came before it. Then, we <code>push_back( start )</code> to complete the path. We have to <code>reverse</code> it first, though, since the first element in <code>path</code> is <code>end</code> and the last is <code>start</code>.</p>
<p>The second <code>if</code> in the <code>while</code> loop handles the corner case of not being able to reach <code>end</code> from <code>start</code>. If the smallest distance is <code>numeric_limits&lt;int&gt;::max()</code>, our ‚Äúinfinity‚Äù, then <code>end</code> can never be reached.</p>
<pre><code class="lang-java">        // ...
        for(auto&amp; v : path) std::cout &lt;&lt; v &lt;&lt; " ";
        	std::cout &lt;&lt; "\n";

        	return distances[end];
    } // end of dijkstra()
</code></pre>
<p>In this final snippet of <code>dijkstra</code>, we print out the <code>path</code> and then <code>return distances[end]</code>, the distance from <code>start</code> to <code>end</code>.</p>
<p>I‚Äôll leave the <code>main()</code> function up to you guys, but <a href="http://pastebin.com/F8TpzSsc" rel="noopener nofollow ugc">here</a> is the source for this post. <em><strong>Note:</strong></em> <em>I have slightly modified the code shown here for simplicity and/or the tutorial‚Äôs sake.</em> There is a main function in <a href="http://pastebin.com/F8TpzSsc" rel="noopener nofollow ugc">that</a>, but feel free to make your own, as long as it satisfies the adjacency matrix.</p>
<hr>
<h1>Conclusion</h1>
<p>That‚Äôs all for today. Next time, I‚Äôll be rolling out a (much) more optimized version of the algorithm that takes advantage of adjacency lists and more concise coding techniques I have omitted from this for clarity reasons.</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="4" />
<span class="post-likes">4 Likes</span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
<div class="crawler-linkback-list" itemscope itemtype="http://schema.org/ItemList">
<div itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
<a itemprop="url" href="../../graph-algorithms-part-2-1-bellman-ford-implementation/570.html">Graph Algorithms (Part 2.1): Bellman-Ford [Implementation]</a>
<meta itemprop="position" content="3">
</div>
<div itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
<a itemprop="url" href="../../graph-algorithms-part-2-0-the-bellman-ford-algorithm-concept/557.html">Graph Algorithms (Part 2.0): The Bellman-Ford Algorithm [Concept]</a>
<meta itemprop="position" content="4">
</div>
</div>
</div>
<div id="post_2" itemprop="comment" itemscope itemtype="http://schema.org/Comment" class="topic-body crawler-post">
<div class="crawler-post-meta">
<span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a itemprop="url" href="https://0x00sec.org/u/oaktree"><span itemprop="name">oaktree</span></a>
(oaktree)
Closed
</span>
<link itemprop="mainEntityOfPage" href="../482.html">
<span class="crawler-post-infos">
<time itemprop="datePublished" datetime="2018-01-21T00:37:38Z" class="post-time">
January 21, 2018, 12:37am
</time>
<meta itemprop="dateModified" content="2018-01-21T00:37:38Z">
<span itemprop="position">2</span>
</span>
</div>
<div class="post" itemprop="text">
<p>This topic was automatically closed after 30 days. New replies are no longer allowed.</p>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/LikeAction" />
<meta itemprop="userInteractionCount" content="0" />
<span class="post-likes"></span>
</div>
<div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
<meta itemprop="interactionType" content="http://schema.org/CommentAction" />
<meta itemprop="userInteractionCount" content="0" />
</div>
</div>
</div>
</div>
<footer class="container wrap">
<nav class="crawler-nav">
<ul>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../../index.html" itemprop="url">Home </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../../categories.html" itemprop="url">Categories </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="https://0x00sec.org/guidelines" itemprop="url">FAQ/Guidelines </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../../tos.html" itemprop="url">Terms of Service </a>
</span>
</li>
<li itemscope itemtype="http://schema.org/SiteNavigationElement">
<span itemprop="name">
<a href="../../../privacy.html" itemprop="url">Privacy Policy </a>
</span>
</li>
</ul>
</nav>
<p class="powered-by-link">Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>
<script src="https://instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
</body>
</html>
