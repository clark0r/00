<!DOCTYPE html>
<html lang="en">
  <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Arch Linux with LVM on LUKS (dm-crypt) Disk Encryption Installation Guide (Legacy/BIOS System) - Linux - 0x00sec - The Home of the Hacker</title>
    <meta name="description" content="Hello 0x00‚Äôers. 
Today I will be writing a guide on an encrypted Arch install via LUKS, then installing the lightweight XFCE desktop environment. The way we will be going about this is we will create a non-encrypted boot&amp;hellip;">
    <meta name="generator" content="Discourse 3.6.0.beta2-latest - https://github.com/discourse/discourse version 3b1964f3ed8bdc2f181e2abccb1b116e4b814db5">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/3/30c4e7d76acf879a124fdfe4d8d126afe628c189_2_32x32.html">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e_2_180x180.html">
<meta name="theme-color" media="all" content="#171616">

<meta name="color-scheme" content="dark">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="1479.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="0x00sec - The Home of the Hacker Search">

    
    <link href="../../stylesheets/color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4.css_%3b%20filename_%3dUTF-8%27%27color_definitions_0x00sec-v2_15_57_dfa17f5b2e0faf8b274cd749dd7dab92384218d4a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="15"/>

<link href="../../stylesheets/common_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27common_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common"  />

  <link href="../../stylesheets/mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile"  />
  <link href="../../stylesheets/desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop"  />



    <link href="../../stylesheets/chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="chat"  />
    <link href="../../stylesheets/checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27checklist_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="../../stylesheets/discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-cakeday_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
    <link href="../../stylesheets/discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-details_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="../../stylesheets/discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-lazy-videos_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="../../stylesheets/discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-local-dates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="../../stylesheets/discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-narrative-bot_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="../../stylesheets/discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-presence_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="../../stylesheets/discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="../../stylesheets/discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-templates_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="../../stylesheets/discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="../../stylesheets/docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27docker_manager_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="../../stylesheets/footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27footnote_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="../../stylesheets/poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="poll"  />
    <link href="../../stylesheets/spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27spoiler-alert_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="../../stylesheets/chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="chat_mobile"  />
    <link href="../../stylesheets/discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-solved_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-solved_mobile"  />
    <link href="../../stylesheets/discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_mobile_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="discourse-topic-voting_mobile"  />
    <link href="../../stylesheets/chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27chat_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="chat_desktop"  />
    <link href="../../stylesheets/discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27discourse-topic-voting_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="../../stylesheets/poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460.css_%3b%20filename_%3dUTF-8%27%27poll_desktop_790af2e09dec4f80b03e04c757d6ba29e7ae3460a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="poll_desktop"  />

  <link href="../../stylesheets/common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960db.css_%3b%20filename_%3dUTF-8%27%27common_theme_57_2b2f1b92f8727e7da2866f327e36ad944c6960dba97f.css?__ws=d.clarkee.co.uk" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="57" data-theme-name="0x00sec-v2"/>
    <link href="../../stylesheets/mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38.css_%3b%20filename_%3dUTF-8%27%27mobile_theme_4_7b59060f894813801912cfad9deff99ebb9e9a38a97f.css?__ws=d.clarkee.co.uk" media="(max-width: 39.99999rem)" rel="stylesheet" data-target="mobile_theme" data-theme-id="4" data-theme-name="mobile chrome"/>
    <link href="../../stylesheets/desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_46_ae6f300d6e65399f845f6707524095726ad69a96a97f.css?__ws=d.clarkee.co.uk" media="(min-width: 40rem)" rel="stylesheet" data-target="desktop_theme" data-theme-id="46" data-theme-name="header links v2"/>

    <link rel="stylesheet" href="../../../external.html?link=https://s3.amazonaws.com/0x00sec/monokai-sublime.css">
<script src="../../../external.html?link=https://s3.amazonaws.com/0x00sec/highlight.pack.js" nonce="KNPnpTqoYeI8DANuPbNNGtZ4c"></script>
<script defer="" src="../../theme-javascripts/05954ff525aceb8daa8b585f92d758d311ae7077.js_%3b%20filename_%3dUTF-8%27%2705954ff525aceb8daa8b585f92d758d311ae7077a97f.js?__ws=d.clarkee.co.uk" data-theme-id="40" nonce="KNPnpTqoYeI8DANuPbNNGtZ4c"></script>
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Arch Linux with LVM on LUKS (dm-crypt) Disk Encryption Installation Guide (Legacy/BIOS System)&#39;" href="1479.rss" />
    <meta property="og:site_name" content="0x00sec - The Home of the Hacker" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://0x00sec.s3.amazonaws.com/original/2X/2/292b1d61e7304da97386971fa6b76c9e51d9cc9e.jpg" />
<meta property="og:image" content="https://0x00sec.s3.amazonaws.com/original/2X/2/292b1d61e7304da97386971fa6b76c9e51d9cc9e.jpg" />
<meta property="og:url" content="https://d.clarkee.co.uk/t/arch-linux-with-lvm-on-luks-dm-crypt-disk-encryption-installation-guide-legacy-bios-system/1479" />
<meta name="twitter:url" content="https://d.clarkee.co.uk/t/arch-linux-with-lvm-on-luks-dm-crypt-disk-encryption-installation-guide-legacy-bios-system/1479" />
<meta property="og:title" content="Arch Linux with LVM on LUKS (dm-crypt) Disk Encryption Installation Guide (Legacy/BIOS System)" />
<meta name="twitter:title" content="Arch Linux with LVM on LUKS (dm-crypt) Disk Encryption Installation Guide (Legacy/BIOS System)" />
<meta property="og:description" content="Hello 0x00‚Äôers.  Today I will be writing a guide on an encrypted Arch install via LUKS, then installing the lightweight XFCE desktop environment. The way we will be going about this is we will create a non-encrypted boot partition, and then we will create a LUKS encrypted partition with 2 logical volumes (home and root). Think of the LUKS partition as a container for our root and home partitions. Lets get started.  Pre-install + Setting Up Your Hard Drive and Partitions You will need a bootable ..." />
<meta name="twitter:description" content="Hello 0x00‚Äôers.  Today I will be writing a guide on an encrypted Arch install via LUKS, then installing the lightweight XFCE desktop environment. The way we will be going about this is we will create a non-encrypted boot partition, and then we will create a LUKS encrypted partition with 2 logical volumes (home and root). Think of the LUKS partition as a container for our root and home partitions. Lets get started.  Pre-install + Setting Up Your Hard Drive and Partitions You will need a bootable ..." />
<meta property="og:article:section" content="Linux" />
<meta property="og:article:section:color" content="283890" />
<meta property="og:article:tag" content="encryption" />
<meta property="og:article:tag" content="operatingsystem" />
<meta property="og:article:tag" content="tutorial" />
<meta property="og:article:tag" content="guide" />
<meta property="og:article:tag" content="linux" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="4 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="11 ‚ù§" />
<meta property="article:published_time" content="2017-01-22T06:11:01+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    <div id="top-navbar" class="container">
<span id="top-navbar-links" style="display:none;">
  <!--<a href="https://git.0x00sec.org" class="dow-menu">GitLab</a>  
  <a href="https://blog.0x00sec.org/irc" class="dow-menu">IRC</a>!-->
  <a href="../../../external.html?link=https://init.0x00sec.org/" class="dow-menu">Init</a>
  <a href="../../../external.html?link=https://discord.gg/c6BHVfn" class="dow-menu">Discord</a>
  <a href="../../../external.html?link=https://init.0x00sec.org/?partners" class="dow-menu">Partners</a>
</span>
</div>
    <header>
  <a href="../../index.html">0x00sec - The Home of the Hacker</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="1479.html">Arch Linux with LVM on LUKS (dm-crypt) Disk Encryption Installation Guide (Legacy/BIOS System)</a>
    </h1>

      <div class="topic-category" itemscope itemtype="../../../external.html?link=http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="../../../external.html?link=http://schema.org/ListItem">
            <a href="../../c/linux/64.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #283890'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Linux</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/encryption.html' class='discourse-tag' rel="tag">encryption</a>, 
            <a href='../../tag/operatingsystem.html' class='discourse-tag' rel="tag">operatingsystem</a>, 
            <a href='../../tag/tutorial.html' class='discourse-tag' rel="tag">tutorial</a>, 
            <a href='../../tag/guide.html' class='discourse-tag' rel="tag">guide</a>, 
            <a href='../../tag/linux.html' class='discourse-tag' rel="tag">linux</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='../../../external.html?link=http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Arch Linux with LVM on LUKS (dm-crypt) Disk Encryption Installation Guide (Legacy/BIOS System)'>
      <link itemprop='url' href='1479.html'>
      <meta itemprop='datePublished' content='2017-01-22T06:11:00Z'>
        <meta itemprop='articleSection' content='Linux'>
      <meta itemprop='keywords' content='encryption, operatingsystem, tutorial, guide, linux'>
      <div itemprop='publisher' itemscope itemtype="../../../external.html?link=http://schema.org/Organization">
        <meta itemprop='name' content='0x00sec - The Home of the Hacker'>
          <div itemprop='logo' itemscope itemtype="../../../external.html?link=http://schema.org/ImageObject">
            <meta itemprop='url' content='../../uploads/default/original/2X/c/c5e37f667fd0fe006ffa67653c662fb64fec597e.html'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/Fust3rCluck.html'><span itemprop='name'>Fust3rCluck</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="1479.html">

                <link itemprop="image" href="../../../0x00sec.s3.amazonaws.com/original/2X/2/292b1d61e7304da97386971fa6b76c9e51d9cc9e.jpg">

              <span class="crawler-post-infos">
                  <time  datetime='2017-01-22T06:11:01Z' class='post-time'>
                    January 22, 2017,  6:11am
                  </time>
                  <meta itemprop='dateModified' content='2017-02-08T00:58:15Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hello 0x00‚Äôers.<br>
Today I will be writing a guide on an encrypted Arch install via LUKS, then installing the lightweight XFCE desktop environment. The way we will be going about this is we will create a non-encrypted boot partition, and then we will create a LUKS encrypted partition with 2 logical volumes (home and root). Think of the LUKS partition as a container for our root and home partitions. Lets get started.</p>
<h2>Pre-install + Setting Up Your Hard Drive and Partitions</h2>
<p>You will need a bootable flash drive with arch on it. If you choose to erase your hard drive, now would be the time to do it. I use dban on a dvd. Boot up arch and you should see<br>
<code>Arch Linux &lt;Version of Arch&gt; (tty1)</code><br>
<code>archiso login: root (automatic login)</code><br>
<code>root@archiso ~ # </code></p>
<p>First lets connect to the interwebz and set up the clock.</p>
<p>if you are connected to Ethernet it should have automatically connected to your network via dhcp but if it didnt you can run<br>
<code>root@archiso ~ # dhcpcd &lt;your interface here ex: enp0s25&gt; </code></p>
<p>You can get a list of your interfaces by typing<br>
<code>root@archiso ~ # ip link</code></p>
<p>If you are using wifi you can use the included tool, ‚Äúwifi-menu‚Äù<br>
<code>root@archiso ~ # wifi-menu -o</code> (the ‚Äúo‚Äù shows asterisks when you type in the wifi password and stores it as a hexadecimal string.)</p>
<p>A dialog menu will pop up with a list of essid‚Äôs. Choose yours via arrow keys and hit enter. Next, it should say "Enter a name for the new profile. It should be already filled out, but if it isn‚Äôt type something in here like ‚Äúhome-wifi‚Äù. Hit enter. Next, type in your wifi password. Hit enter, if it asks you if you would like to save this profile select yes and hit enter again. Finally ping a website to see if the internet is working.<br>
<code>root@archiso ~ # ping www.google.com</code></p>
<p>to set the system clock via ntp type<br>
<code>root@archiso ~ # timedatectl set-ntp true</code></p>
<p><strong>Now lets partition the disks</strong>, and be aware that this will erase your hard drive.<br>
Identify your hard drive via fdisk.<br>
<code>root@archiso ~ # fdisk -l</code></p>
<p>For me it is /dev/sda</p>
<p>now enter the disk tool ‚Äúparted‚Äù<br>
<code>root@archiso ~ # parted</code></p>
<p>notice how instead of  <code>root@archiso ~ # </code> it shows <code>(parted)</code>. Now select your hard drive<br>
<code>(parted)  select /dev/sdX</code> where X is your hard drive label. For me it was <code>(parted) select /dev/sda</code><br>
Next, create a msdos disk label<br>
<code>(parted) mklabel msdos</code><br>
then create the boot partition<br>
<code>(parted) mkpart primary ext2 1MB 512MB</code><br>
Then create a partition for the lvm using the rest of the disk space.<br>
<code>(parted) mkpart primary ext4 512MB 100%</code><br>
<code>(parted) print</code> should list all of your partitions, you should have 2.<br>
now set the boot flag on your boot partition<br>
<code>(parted) set 1 boot on</code> (1 should be the number of your boot partition)<br>
now type<br>
<code>(parted) quit</code><br>
and verify that the changes have been made.<br>
<code>root@archiso ~ # fdisk -l</code><br>
you should see two partitions with one having an asterisk under ‚Äúboot‚Äù. For my hard drive /dev/sda1 is my boot partition, and /dev/sda2 is the partition I will be using for the lvm so that is what I will be going off of for this part of the tutorial.</p>
<p><strong>Now lets set up luks</strong><br>
type<br>
<code>root@archiso ~ # cryptsetup luksFormat /dev/sda2</code><br>
(2 being the bigger partition‚Ä¶the one you will be using for the lvm)<br>
type YES and your password for the encrypted partition. Be sure to have a strong password.</p>
<p>now open the luks container<br>
<code>root@archiso ~ # cryptsetup open /dev/sda2 name</code><br>
name can be anything. The container will now be at /dev/mapper/name</p>
<p>next lets create the physical volume.<br>
<code>root@archiso ~ # pvcreate /dev/mapper/name</code><br>
now create a volume group, it can be whatever name you want.<br>
<code>root@archiso ~ # vgcreate x /dev/mapper/name</code> where x is anything you want<br>
now lets create the logical volumes.<br>
<code>root@archiso ~ # lvcreate -L 8GB x -n swap</code> where x is the name of your volume group<br>
<code>root@archiso ~ # lvcreate -L 30G x -n root</code><br>
<code>root@archiso ~ # lvcreate -l 100%FREE x -n home</code></p>
<p><strong>Now lets create the file systems on each volume + boot partition.</strong><br>
<code>root@archiso ~ # mkfs.ext4 /dev/mapper/x-home</code><br>
<code>root@archiso ~ # mkfs.ext4 /dev/mapper/x-root</code><br>
<code>root@archiso ~ # mkswap /dev/mapper/x-swap</code><br>
<code>root@archiso ~ # mkfs.ext2 /dev/sda1</code> where /dev/sda1 is your boot partiton (the one where we set the boot flag on)</p>
<p><strong>Now we mount</strong><br>
<code>root@archiso ~ # mount /dev/mapper/x-root /mnt</code><br>
<code>root@archiso ~ # mkdir /mnt/home</code><br>
<code>root@archiso ~ # mount /dev/mapper/x-home /mnt/home</code><br>
<code>root@archiso ~ # mkdir /mnt/boot</code><br>
<code>root@archiso ~ # mount /dev/sda1 /mnt/boot</code><br>
<code>root@archiso ~ # swapon /dev/mapper/x-swap</code></p>
<h2>Installation</h2>
<p>Now let us install arch<br>
<code>root@archiso ~ # pacstrap /mnt base base-devel</code><br>
Lets generate the fstab file<br>
<code>root@archiso ~ # genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code><br>
Then lets chroot into the system.<br>
<code>root@archiso ~ # arch-chroot /mnt</code><br>
Notice how the prompt changes to <code>[root@archiso /] # </code></p>
<p><strong>Setting the timezone and locales</strong><br>
To set the time zone type<br>
<code>[root@archiso /] # ln -s /usr/share/zoneinfo/YourRegionHere/YourCityHere /etc/localtime</code><br>
Run the hardware clock<br>
<code>[root@archiso /] # hwclock --systohc</code><br>
Next, type<br>
<code>[root@archiso /] # nano /etc/locale.gen</code><br>
and uncomment (delete the #) on the line with ‚Äúen_US.UTF-8 UTF-8‚Äù (or your localization)<br>
then run<br>
<code>[root@archiso /] # locale-gen</code><br>
now type<br>
<code>[root@archiso /] # nano /etc.locale.conf</code><br>
and type <code>LANG=en_US.UTF-8</code> or what you need for your local.<br>
type<br>
<code>[root@archiso /] # echo myhostname &gt; /etc/hostname</code> where myhostname is what you want your hostname to be.<br>
Now lets install wpa_supplicant, iw, dialog, and netctl<br>
<code>[root@archiso /] # pacman -S wpa_supplicant iw</code><br>
now type<br>
<code>[root@archiso /] # nano /etc/mkinitcpio.conf</code><br>
and where it says <code>HOOKS="bla bla bla</code> make sure ‚Äúkeyboard‚Äù, ‚Äúencrypt‚Äù, and ‚Äúlvm2‚Äù are in that list.</p>
<p><strong>Now we install and configure Grub</strong><br>
<code>[root@archiso /] # pacman -S grub</code><br>
<code>[root@archiso /] # grub-install /dev/sda</code> where /dev/sda is the hard drive you are installing arch onto.<br>
<code>[root@archiso /] # nano /etc/default/grub</code><br>
and where it says <code>GRUB_CMDLINE_LINUX=""</code> make it say<br>
<code>GRUB_CMDLINE_LINUX="cryptdevice=/dev/sda2:x root=/dev/mapper/x-root"</code><br>
where x is the name of your volume group, and /dev/sda2 should be your partition with the volume group.<br>
Now type<br>
<code>[root@archiso /] # grub-mkconfig -o /boot/grub/grub.cfg</code><br>
and type<br>
<code>[root@archiso /] # mkinitcpio -p linux</code><br>
to set the root password type<br>
<code>[root@archiso /] # passwd</code><br>
Now lets add a user account and give it sudo privleges.<br>
<code>[root@archiso /] # useradd -m -G wheel yourusername</code><br>
where yourusername is‚Ä¶of course‚Ä¶the username you want‚Ä¶duh.<br>
Set the password with<br>
<code>[root@archiso /] # passwd yourusername</code><br>
now type<br>
<code>[root@archiso /] # visudo</code><br>
Navigate to where it says <code> # %wheel ALL=(ALL) ALL</code> and uncomment it.<br>
(its like vi so navigate so that the cursor is over the #, hit del, and type ‚Äú:wq‚Äù<br>
Now you should be able to reboot into your new system. You can log into root or your newly created account to install a couple more packages.</p>
<h2>Installing XFCE and more things.</h2>
<p>First lets install the sound manager<br>
<code>[root@hostname ~] # pacman -S alsa-utils</code><br>
Now install the Xorg display server and other goodies.<br>
<code>[root@hostname ~] # pacman -S xorg-server xorg-server-utils xorg-xinit</code><br>
<code>[root@hostname ~] # pacman -S xfce4 xfce4-goodies</code><br>
<code>[root@hostname ~] # pacman -S lxdm</code><br>
<code>[root@hostname ~] # systemctl enable lxdm</code><br>
This will install xfce, lxdm, and bring the ‚Äúlogin screen‚Äù up on boot.</p>
<p><strong>More packages</strong><br>
To install firefox type<br>
<code>[root@hostname ~] # pacman -S firefox</code></p>
<p>To install wicd network manager type<br>
<code>[root@hostname ~] # pacman -S wicd wicd-gtk</code><br>
<code>[root@hostname ~] # systemctl start wicd.service &amp;&amp; systemctl enable wicd.service</code></p>
<p><em>If you have a Thinkpad like me and would like to use the dedicated volume control keys do this:</em><br>
Main Menu &gt; Settings -&gt; Keyboard -&gt; Application Shortcuts. Add a shortcut and type <code>amixer set Master 1+</code>; click ok; then press the volume up key when it prompts you too. Add another; <code>amixer set Master 1-</code>; ok; press volume down key. then add one and type ‚Äú<code>amixer set Master toggle</code>‚Äù; ok; press mute key.</p>
<h2>Final Words</h2>
<p>Thank your for reading this guide. I really hope it helps, In a time like now everyone should be using disk encryption to protect themselves from thieves and nosy governments  . Arch may turn you off because its complicated but dont let it. It has a great community. I advise you to read about the AUR (Arch User Repository). If you do not like XFCE you can stop at the part where I say you should be able to reboot your computer. I chose XFCE because it is simple, lightweight and runs great on older laptops like my Thinkpad. Last but not least‚Ä¶I wrote this at 1:00 AM so please give me suggestions and recommendations on how I can make this article easier to understand and better.</p>
<p><span class="hashtag">#Other</span> things you may need (special thanks to <a class="mention" href="../../u/kowalski.html">@kowalski</a> )</p>
<p><strong>Graphic Drivers</strong> <code>pacman -Ss xf86-video</code> and then pick the one for your card.<br>
<strong>Input Devices</strong> search with <code>pacman -Ss xf86-input</code>. evdev and synaptics/libinput should be enough.</p>
<p><code>Including additional LUKS encryption options is a good idea, even better if you have decent hardware. Here is a link to the wiki article with good explanation about what each option means: https://wiki.archlinux.org/index.php/Dm-crypt/Device_encryption#Encryption_options_for_LUKS_mode3</code></p>
<p>If you don‚Äôt want lxdm or any display manager, add startxfce4 to your .xinitrc in the home directory and just startx. You can also set startx to be executed automatically when you log into tty1 by putting this in /etc/profile.</p>
<h1>autostart systemd default session on tty1</h1>
<p>if [[ ‚Äú$(tty)‚Äù == ‚Äò/dev/tty1‚Äô ]]; then<br>
exec startx<br>
fi<br>
Install pulseaudio-alsa so that when you play youtube and mpd together, youtube doesn‚Äôt stop. -_-</p>
<p>For nice composting in XFCE, use compiz or compton. ( I used compiz with mate and xfce before.)</p>
<p>[root@archiso /] # visudo<br>
Navigate to where it says # %wheel ALL=(ALL) ALL and uncomment it.<br>
(its like vi so navigate so that the cursor is over the #, hit del, and type ‚Äú:wq‚Äù<br>
EDITOR=nano visudo, no need to use vi.</p>
<p>And as always,<br>
Stay Frosty <img src="../../../0x00sec.org/images/emoji/twitter/snowman2c164.html?v=9" title=":snowman2:" class="emoji" alt=":snowman2:"></p>
<p>Elliot Approved <img src="../../../0x00sec.org/images/emoji/twitter/thumbsupc164.html?v=9" title=":thumbsup:" class="emoji" alt=":thumbsup:"> <img src="../../../0x00sec.s3.amazonaws.com/original/2X/2/292b1d61e7304da97386971fa6b76c9e51d9cc9e.jpg" width="690" height="388"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="5" />
              <span class='post-likes'>5 Likes</span>
            </div>


            
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/kowalski.html'><span itemprop='name'>kowalski</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2017-01-22T12:25:12Z' class='post-time'>
                    January 22, 2017, 12:25pm
                  </time>
                  <meta itemprop='dateModified' content='2017-01-22T12:25:12Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Great article, I have a similar cheatsheet for myself! Few things I‚Äôd like to point out:</p>
<ol>
<li>
<p>You haven‚Äôt listed out the step where graphics drivers are installed. It‚Äôs easy to do that, <code>pacman -Ss xf86-video</code> and then pick the one for your card. Also, xorg-twm, xorg-xclock and xterm aren‚Äôt needed.<br>
For your input devices, search with <code>pacman -Ss xf86-input</code>. evdev and synaptics/libinput should be enough. keyboard and mouse are for old devices that don‚Äôt really play well with udev iirc.</p>
</li>
<li>
<p>Including additional LUKS encryption options is a good idea, even better if you have decent hardware. Here is a link to the wiki article with good explanation about what each option means: <a href="../../../external.html?link=https://wiki.archlinux.org/index.php/Dm-crypt/Device_encryption#Encryption_options_for_LUKS_mode" class="inline-onebox" rel="noopener nofollow ugc">dm-crypt/Device encryption - ArchWiki</a></p>
</li>
<li>
<p>If you don‚Äôt want lxdm or any display manager, add <code>startxfce4</code> to your .xinitrc in the home directory and just startx. You can also set startx to be executed automatically when you log into tty1 by putting this in /etc/profile.</p>
<pre><code> # autostart systemd default session on tty1
 if [[ "$(tty)" == '/dev/tty1' ]]; then
     exec startx
 fi
</code></pre>
</li>
<li>
<p>Install <code>pulseaudio-alsa</code> so that when you play youtube and mpd together, youtube doesn‚Äôt stop. -_-</p>
</li>
<li>
<p>For nice composting in XFCE, use compiz or compton. ( I used compiz with mate and xfce before.)</p>
</li>
<li></li>
</ol>
<blockquote>
<p>[root@archiso /] # visudo<br>
Navigate to where it says # %wheel ALL=(ALL) ALL and uncomment it.<br>
(its like vi so navigate so that the cursor is over the #, hit del, and type ‚Äú:wq‚Äù</p>
</blockquote>
<p><code>EDITOR=nano visudo</code>, no need to use vi.</p>
<p>Good Job though! <img src="../../images/emoji/twitter/wink8e5e.png?v=15" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="4" />
              <span class='post-likes'>4 Likes</span>
            </div>


            
          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/Fust3rCluck.html'><span itemprop='name'>Fust3rCluck</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2017-01-22T15:30:56Z' class='post-time'>
                    January 22, 2017,  3:30pm
                  </time>
                  <meta itemprop='dateModified' content='2017-01-22T15:30:56Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Thank you, I will add your suggestions. I never had a problem with the keyboard thing and I was using integrated graphics so that‚Äôs why I didn‚Äôt install any drivers.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>


            
          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="../../../external.html?link=http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='../../u/system.html'><span itemprop='name'>system</span></a>
                (system)
                  Closed 
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-01-21T00:36:56Z' class='post-time'>
                    January 21, 2018, 12:36am
                  </time>
                  <meta itemprop='dateModified' content='2018-01-21T00:36:56Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This topic was automatically closed after 30 days. New replies are no longer allowed.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="../../../external.html?link=http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="../../../external.html?link=http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>


            
          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../index.html' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../categories.html' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../guidelines.html' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='../../../external.html?link=http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="../../../external.html?link=https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    <script src="../../../external.html?link=http://instant.page/3.0.0" type="module" defer="" integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1" nonce="KNPnpTqoYeI8DANuPbNNGtZ4c"></script>
  </body>
  
</html>
