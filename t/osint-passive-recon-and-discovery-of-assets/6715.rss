<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>OSINT - Passive Recon and Discovery of Assets</title>
    <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715</link>
    <description># OSINT - Passive Recon and Passive Discovery Of Assets
Sup 0x00&#39;ers, to kick this badass series off, I am going to begin with the most important aspect of pentesting. Passive Recon and OSINT. Now, do not let the word &#39;passive&#39; fool you. This is no light recon, you can uncover vast amounts of infomation through passive recon, without ever doing anything intrusive.

## Define Passive
My definition of the word passive is probably different to what others would define as passive. In my books, it&#39;s anything that can be disguised as regular traffic, nothing intrusive, or easily detectable. Basically, if you can&#39;t be distinguised as an attacker from a visitor, and you aren&#39;t doing anything intrusive/potentially damaging, it&#39;s passive. I know I will get a few who will argue to the death this is not 100% passive, and you&#39;d be right, but this is still my initial pre-pentest workflow. 

## Where do I start?
Good question. This will hugely depend on what sort of pentest you&#39;re doing. In penetration testing, there is a spectrum of different types of pentest:

 - Black Box Pentest
 - White Box Pentest
 - Anything in between

A Black Box Pentest is when you&#39;re simulating an attacker, you&#39;re given a single starting host, and usually a list of in-scope IP addresses, and that is all. You must attempt to discover services, network design, and things of that nature. 

A White Box Pentest is similar, except you are given everything that an internal employee (and more) would have, this includes application source code, network design configurations, diagrams, stuff like that.

Both types of Pentest have their place, typically a Black Box Pentest is more telling than a White Box Pentest, as it shows what an external attacker could discover with little starting infomation. In this series, we&#39;re going to be covering the former, Black Box Pentesting, as it is the most common sort of Pentest, and will be what most of you are looking for. 

Now, if you read the previous paragraphs, you&#39;ll quickly notice that I mentioned that you may be given a list of in-scope IP addresses. To simply scan all of these IP&#39;s and be done with it is very unrealistic, and so you should first  begin with your asset discovery stage. Now there are a tonne of ways we can do this, and I am going to use Google as an example of this, and we&#39;re going to be using the company website as our starting point. 

https://www.google.com/

### Burp Suite Passive, as observent as Sherlock Holmes 

What can we do with this? The first thing I like to do, is actually visit the website with my browser configured to use Burpsuite as a proxy, and with a root SSL cert installed. I am not going to explain how to do this, if anybody wants to write an article on how to do this feel free and I&#39;ll link it here! 

![enter image description here](//0x00sec.s3.dualstack.us-east-1.amazonaws.com/original/2X/0/0ed4d3056f0490a6bee08312430886589af49454.png) 

If you look on the side bar of your BurpSuite, under `Target &gt; Site map &gt; https://www.google.com/`

We can already see a quick overview of immediate file structure of the site, loaded scripts, and also, if we take a look at the wider Site map, a long list of other requested hosts, we may decide to use this infomation later, as always in pentesting, it is better to collect too much infomation, and decide not to use it, than to remove it, and end up recollecting it unnecessarily. Remember, this is &#39;passive&#39; recon, we need to stay very quiet in this stage, and not set off any alarm bells. *

If you have Burp Suite Professional, you can also right click this asset and select &quot;Passively Scan this Host&quot;, and it will hunt your exisiting, requested page code for known vulnerabilities, email disclosure and the like. I do not have Burp Suite Professional, and so I will not be using it :D 

&gt; *Note, if this particular website does not recieve many page views, you may decide to use a VPN using the same region as the target
&gt; demographic for this website. If the SOC/SIEM solutions are really
&gt; sensitive, even a page view from a foreign location could create
&gt; flags. If your goal is to not be detected by any monitoring solution
&gt; (as usally is the goal with a good Pentest), then this might be a
&gt; thing you would go for.

Okay, so that hasn&#39;t helped us significantly, occasionally, things will pop out like `/cgi-bin/` , `/admin/` or `/includes/`, if something does catch your eye, immediately write this down in your reporting software (perhaps in a tool like [Lair](https://github.com/lair-framework/lair), if somebody makes a writeup on how to spin this up, let me know, and I&#39;ll link it here!

 ### Passive port scanning with Shodan, wait, passive, portscanning? What?
 So you&#39;ve been to the website, you know at least port 80 or port 443 is open, but what else is running? You can just open up shodan, or you can use the insanely cool nmap scripts.

Obtain a shodan API key, (if somebody makes a tutorial on this, I&#39;ll link it!), and place it inline with this nmap command.

```
nmap --script=shodan-api --script-args &#39;shodan-api.apikey=XXXXXX&#39; google.com
```
![enter image description here](https://0x0.st/seBD.png)
 
In this image, I have censored my API key, although this is a very simple example, this will do multiple things: 

 - -sn - Disable Port Scan
 - -Pn - Skip host discovery, don&#39;t ping the host
 - -n - Skip DNS Resolution

Nmap will then realise it has nothing left to do, and will run the shodan-api script. The shodan API script will go out to shodan.io and retrieve all infomation it knows about the host, including sometimes host versions and port numbers. This has been way more infomational in other circumstances, your mileage may vary. 

The point of these tutorials is to provide a very realistic view of what you will see in a normal pentest, and usually, you will not get a single Severity 5 vulnerability with remote code execution, you&#39;ll find 5 Severity 3&#39;s, and you can then string these together to get a shell, to get access to a panel, or even make a very convincing phishing page. We will cover that in more detail in the exploitation section of this series.

### DNS Bruteforcing, but, really fast
Before we go into DNS bruteforcing, we&#39;ll look into the low hanging fruit of DNS, and that is zone transfers. Zone transfers was initially a tool used for server administrators to allow them to easily replicate a DNS database, such as transfering to new domain names. If the target company has ever migrated their website, and have little security awareness, this will usually work.

![enter image description here](https://0x0.st/seBC.png)

We can easily do domain transfers using a tool called [dnsenum](https://github.com/fwaeytens/dnsenum), it is written in perl (@nugget), and is a kind of old-reliable tool used in my pentest arsenal.  As you can see here, dnsenum uncovered a few interesting things about the host, namely:

 - Host Address 
	- This is the IP that you&#39;ll get when you do a simple nslookup on the domain 
 -  Wild card host
    - This is the IP that will be returned when you call a random subdomain, such as `kttfvatukbld`, unless you get really lucky (or unlucky, your call), and that is a real subdomain, this is usually an IP from your DNS provider, or from your ISP. If they&#39;re really secure, the wildcard domain will be the same as the Host IP, which makes domain enumeration a bitch.
 - Nameservers
   - These are the nameservers that you have used to do the lookup, usually, in a small-medium sized company, this DNS is hosted elsewhere, and can often be courtesy of the domain name registrar. This can be insanely useful infomation.  
 - MX Servers
   - Now this infomation is so easily overlooked, although it is very surprising what this can yield. This will reveal the MX servers of the domain, a lot of companies in the corporate space now a days will use externally hosted email, such as Google or Microsoft/Outlook, quite often these things link to the entire workflow of the company, which can lead you to discover things like Microsoft Lync Servers, Login panels for user email etc.  
 - Zone Transfers
   - This is quite a rare one now a days, you won&#39;t see this work on a lot of hosts that are in the public domain, facebook, twitter etc. Although on pentests, this is surprisingly common. If this succeeds, it will return a list of all registered sub-domains, which is huge. You&#39;re better off trying it and not finding anything, than never knowing.

#### Ok, the fast bit. 
Ever heard of Aiodns? Well now you have. Aiodns is a DNS resolver that does synchronous calls over an asynchronous medium. In short, that means that you can efficiently make more than one call without closing the connection after each request. This means it can be, really fast.

Introducing [Aiodnsbrute](https://github.com/blark/aiodnsbrute)! Blark had the smarts to turn this into a bruteforcing tool, and man it works well. I mean read this:

&quot;Benchmarks on small VPS hosts put around 100k DNS resoultions at 1.5-2mins. An amazon M3 box was used to make 1 mil requests in just over 3 minutes. Your mileage may vary. It&#39;s probably best to avoid using Google&#39;s resolvers if you&#39;re purely interested in speed.&quot;

1 million requests, uh, what? Feed this tool a Discovery Dictionary nabbed from [SecLists](https://github.com/danielmiessler/SecLists) (Discovery&gt;DNS&gt;subdomains-top1mil-110000.txt is great), and you&#39;re on the road to discovering every damn subdomain this domain name has.

What is cooler, is that PCI compliance is a standard, and part of it&#39;s requirements is that every host have a signed, valid certificate. Can&#39;t have a valid certificate on an IP, so what do firms do? They create subdomains for everything they need SSL access to. Yep, you guesssed it, that includes VPN portals, email logins, development sites (please). 

Lets try it on google.com

```
$ aiodnsbrute google.com
```

![enter image description here](https://0x0.st/se28.png)

Uh, well that&#39;s weird, why are their so many of those 92 IP addresses?

Those are actually the DNS resolver. Remember when we did a DNS Lookup of a wildcard? Yeah, it&#39;s the same IP. We can easily remedy this with a grep command.

```
aiodnsbrute google.com | grep -v &quot;the resolver IP&quot;
```

![enter image description here](https://0x0.st/se2K.png)

Okay, so granted the formatting is a little broken, but this is real world pentesting people, this isn&#39;t supposed to be glamarous!

Look at those subdomains, they actually go somewhere. Now you can save these IP addresses in a long text file for further examination, or maybe you want to scan them with your newly learned passive shodan skills? You can do reverse nslookups on the IP&#39;s too and see if they resolve somewhere else. 

### Scraping Emails 
You might have used this tool before, it&#39;s pretty cool.

It&#39;s called theHarvester.  What it does, is scrape google results, titles, descriptions, metadata, and looks for things resembling email addresses.

```
./theHarvester.py -d companydomain.com -b google
```

![enter image description here](https://0x0.st/se2q.png)

For demonstration purposes, I used protonmail.com, but put in any company domain name, and you&#39;ll usually nab a few emails. If this doesn&#39;t work, you can try Hunter.

### Hunter.io, like Google, but for emails
![enter image description here](https://0x0.st/se2b.png)
16,000 results, not bad. What this also does that is so cool is that it tells you the common pattern of emails. What you can do with this (I&#39;ll go into this more in detail in part 2), is use this to generate email addresses from names, which can later be used for password spraying (trying a single password for every single email address).

We can do a lot with this infomation, we can load it into an email program and send out phishing emails, we can password spray with them (I will show you the way), or, we can check them for leaks. This where weleakinfo comes in...
### Weleakinfo.com
Remember those data breaches, for Adobe, Linkedin, Myspace? Stuff like that? Well the dumps from these are still out there, and people have published them, you can still find them in old magnet links around the way, however there are thousands of dumps to recover, and they&#39;re hard to find. 

[Weleakinfo](https://weleakinfo.com/) takes all this infomation and compiles it into one big, fast, searchable database. And if you decide to stuff all these emails in there, you might even be lucky enough to get a few old passwords, which you can now variate and try on existing company accounts, how cool is this! We haven&#39;t even instrusively touched their servers, and we already have their account passwords? Not so fast. 

16,000 emails! If an email lookup took you 10 seconds to do, and take down the results, (which is very fast) it would take you about 48 hours of non-stop copy pasting to go through them all.

If you actually want to be able to sleep, and don&#39;t have fingers as muscly as John Cena, then I reccomend you automate it. Weleakinfo are actually nice enough to provide a public API, https://weleakinfo.com/api/public,  which allows 3 requests per second, if you want to go faster, try out a tool like [ProxyDock](https://0x00sec.org/t/create-your-own-private-botnet-with-proxydock/5917)

(If somebody wants to write an article on this, and make a tool for this, let me know and I&#39;ll link it here)

### Geo2IP - Extra
Okay, scenario time. You know about a hosts location, but you don&#39;t have a clue about it&#39;s exact details. No problem. Time to use [geo2ip](https://github.com/pry0cc/geo2ip). Geo2Ip is a tool I developed with @IoTh1nkN0t, and it basically takes a rough coordinate location, and then gives you ranges associated with that coordinate. From there, you can feed these into an nslookup tool (maybe make your own with aiodns!), and discover all assets associated with them.

### Reverse Whois 
Another tool you can use for asset discovery is [reverse whois](http://www.viewdns.info/reversewhois/?).

Now you can use these tools to enter in a company name, email address, or registrant name (obtained from your previous recon), and then go through these same steps with the newly obtained emails, domain names, and extra infomation. Repeat until you have no more passive infomation to obtain. Now you are ready for Active Recon. 

In conclusion, there is a vast amount of infomation you can obtain just by knowing where to look. This is by no means an exhaustive list, but it contains a lot of the things that I use in my day to day OSINT that really give me a step up in the pentesting scene.

Let me know in the comments if you liked this article, and make sure to click that &lt;3 button to let me know you want more like this. And be sure to share this if you learnt anything to spread the [knowledge](https://www.youtube.com/watch?v=3DZ1tWsnLeQ)! 

Thank you for reading, and as always, stay snappy :)</description>
    
    <lastBuildDate>Sun, 03 Jun 2018 21:50:56 +0000</lastBuildDate>
    <category>Reconnaissance</category>
    <atom:link href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[pry0cc]]></dc:creator>
        <description><![CDATA[
            <p>This topic was automatically closed after 30 days. New replies are no longer allowed.</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/13">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/13</link>
        <pubDate>Sat, 16 Jun 2018 11:39:05 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-13</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[pry0cc]]></dc:creator>
        <description><![CDATA[
            <p>I love hearing this kind of thing <img src="https://0x00sec.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Thanks for reading and being a part of this journey!</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/12">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/12</link>
        <pubDate>Sun, 03 Jun 2018 21:50:56 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-12</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[newnoobie]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for sharing your knowledge.  It will take me a long time to learn everything in this post, but I am grateful for the easy to understand purpose and background on each tool.</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/11">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/11</link>
        <pubDate>Sun, 03 Jun 2018 19:25:38 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-11</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[pry0cc]]></dc:creator>
        <description><![CDATA[
            <p>That is really cool! Nice share. I might add it later.</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/10">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/10</link>
        <pubDate>Fri, 18 May 2018 12:11:32 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-10</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[Techno_Forg]]></dc:creator>
        <description><![CDATA[
            <p>I think there’s a tool written in Python that can do this job… let me see if I can find it (it’s saved to my drive)…</p>
<p>(Five hours later)</p>
<p>Alright, I’m back… found the github link after saving the world from aliens.</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">
      <a href="https://github.com/graniet/operative-framework" target="_blank" rel="noopener nofollow ugc">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://0x00sec.s3.amazonaws.com/original/2X/6/6c24ed5e1cfc5ebe80fc5d017f661ba63092be37.jpeg" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="https://github.com/graniet/operative-framework" target="_blank" rel="noopener nofollow ugc">graniet/operative-framework</a></h3>

<p>operative framework is a OSINT investigation framework, you can interact with multiple targets, execute multiple modules, create links with target, export rapport to PDF file, add note to target or...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>On a more series note… this I think should be worth  looking into. It does <em>ALMOST</em> everything. So yeah… ~Cheers!</p>
<p>–Techno Forg–</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/9">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/9</link>
        <pubDate>Fri, 18 May 2018 10:31:18 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-9</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[Nitrax]]></dc:creator>
        <description><![CDATA[
            <p>Dope article mate. Love it. Didn’t know about shodan nmap script <img src="https://0x00sec.org/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"> Could be useful to import result whithin metasploit which provides a nice way to handle detected services.</p>
<p>By the same token, have you ever heard about virustotal passive DNS replication? It’s redoubtable, you will thanks me later <img src="https://0x00sec.org/images/emoji/twitter/stuck_out_tongue.png?v=9" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p><a href="https://www.virustotal.com/fr/domain/google.ch/information/" class="onebox" target="_blank" rel="nofollow noopener">https://www.virustotal.com/fr/domain/google.ch/information/</a></p>
<p>P.S: I will soon release a recon-ng like tool developed with golang, providing well more functionnalites than existing tools on the market. Stay tuned.</p>
<p>Best,<br>
Nitrax</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/8">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/8</link>
        <pubDate>Fri, 18 May 2018 10:27:12 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-8</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[0xE02B7]]></dc:creator>
        <description><![CDATA[
            <p>That is a really cool article.<br>
I have to admit, I have never done a pentest - ok, maybe because I am a Linux System Engineer and not a security consultant / *hacker.</p>
<p>Sometimes our customers hire some to do black box tests.<br>
Most of the times those people are totaly bad.</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/7">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/7</link>
        <pubDate>Fri, 18 May 2018 08:49:00 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-7</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[pry0cc]]></dc:creator>
        <description><![CDATA[
            <p>Recon on individuals? I shall get to that in part 2 <img src="https://0x00sec.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Stay tuned.</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/6">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/6</link>
        <pubDate>Fri, 18 May 2018 07:20:39 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-6</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[zifor]]></dc:creator>
        <description><![CDATA[
            <p>Great article bro…</p>
<p>how about recon people?</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/5">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/5</link>
        <pubDate>Fri, 18 May 2018 03:15:32 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-5</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[zSec]]></dc:creator>
        <description><![CDATA[
            <p>I’d love to do that. Sadly I’m currently really busy as well and I have to travel quiet a lot. That’s why I’m currently rarely on here as well.<br>
But If I find the time I hope to write something regarding pentesting <img src="https://0x00sec.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/4">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/4</link>
        <pubDate>Thu, 17 May 2018 20:32:40 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-4</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[pry0cc]]></dc:creator>
        <description><![CDATA[
            <p>A few of the pentests I have done, we got DNS zone transfers. It’s worth trying.</p>
<p>I’m glad you enjoyed the article. As a fellow pentester, I would love to see your take on important parts of a pentest. Maybe we can expect a pentesting series from <a class="mention" href="https://0x00sec.org/u/zsec">@zSec</a>’s perspective?</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/3">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/3</link>
        <pubDate>Thu, 17 May 2018 20:29:29 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-3</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[zSec]]></dc:creator>
        <description><![CDATA[
            <p>Great article <a class="mention" href="https://0x00sec.org/u/pry0cc">@pry0cc</a>! <img src="https://0x00sec.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Fun fact: In one of my recent pentests I was able to do a DNS zone transfer. I have to admit, I was quiet shocked to see it work in a real scenario. Like you already mentioned, it is pretty rare nowadays.</p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/2">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/2</link>
        <pubDate>Thu, 17 May 2018 18:42:29 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-2</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
      <item>
        <title>OSINT - Passive Recon and Discovery of Assets</title>
        <dc:creator><![CDATA[pry0cc]]></dc:creator>
        <description><![CDATA[
            <h1>OSINT - Passive Recon and Passive Discovery Of Assets</h1>
<p>Sup 0x00’ers, to kick this badass series off, I am going to begin with the most important aspect of pentesting. Passive Recon and OSINT. Now, do not let the word ‘passive’ fool you. This is no light recon, you can uncover vast amounts of infomation through passive recon, without ever doing anything intrusive.</p>
<h2>Define Passive</h2>
<p>My definition of the word passive is probably different to what others would define as passive. In my books, it’s anything that can be disguised as regular traffic, nothing intrusive, or easily detectable. Basically, if you can’t be distinguised as an attacker from a visitor, and you aren’t doing anything intrusive/potentially damaging, it’s passive. I know I will get a few who will argue to the death this is not 100% passive, and you’d be right, but this is still my initial pre-pentest workflow.</p>
<h2>Where do I start?</h2>
<p>Good question. This will hugely depend on what sort of pentest you’re doing. In penetration testing, there is a spectrum of different types of pentest:</p>
<ul>
<li>Black Box Pentest</li>
<li>White Box Pentest</li>
<li>Anything in between</li>
</ul>
<p>A Black Box Pentest is when you’re simulating an attacker, you’re given a single starting host, and usually a list of in-scope IP addresses, and that is all. You must attempt to discover services, network design, and things of that nature.</p>
<p>A White Box Pentest is similar, except you are given everything that an internal employee (and more) would have, this includes application source code, network design configurations, diagrams, stuff like that.</p>
<p>Both types of Pentest have their place, typically a Black Box Pentest is more telling than a White Box Pentest, as it shows what an external attacker could discover with little starting infomation. In this series, we’re going to be covering the former, Black Box Pentesting, as it is the most common sort of Pentest, and will be what most of you are looking for.</p>
<p>Now, if you read the previous paragraphs, you’ll quickly notice that I mentioned that you may be given a list of in-scope IP addresses. To simply scan all of these IP’s and be done with it is very unrealistic, and so you should first  begin with your asset discovery stage. Now there are a tonne of ways we can do this, and I am going to use Google as an example of this, and we’re going to be using the company website as our starting point.</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <a href="https://www.google.com/" target="_blank" rel="noopener">google.com</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/276;"><img src="https://0x00sec.s3.amazonaws.com/optimized/3X/e/8/e8462b3eb6c9719abd8d9662d30555bb46f5e9c4_2_690x276.gif" class="thumbnail" width="690" height="276" srcset="https://0x00sec.s3.amazonaws.com/optimized/3X/e/8/e8462b3eb6c9719abd8d9662d30555bb46f5e9c4_2_690x276.gif, https://0x00sec.s3.amazonaws.com/original/3X/e/8/e8462b3eb6c9719abd8d9662d30555bb46f5e9c4.gif 1.5x, https://0x00sec.s3.amazonaws.com/original/3X/e/8/e8462b3eb6c9719abd8d9662d30555bb46f5e9c4.gif 2x" data-small-upload="https://0x00sec.s3.amazonaws.com/optimized/3X/e/8/e8462b3eb6c9719abd8d9662d30555bb46f5e9c4_2_10x10.png"></div>

<h3><a href="https://www.google.com/" target="_blank" rel="noopener">Google</a></h3>

<p>Google's 22nd Birthday! #GoogleDoodle</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<h3>Burp Suite Passive, as observent as Sherlock Holmes</h3>
<p>What can we do with this? The first thing I like to do, is actually visit the website with my browser configured to use Burpsuite as a proxy, and with a root SSL cert installed. I am not going to explain how to do this, if anybody wants to write an article on how to do this feel free and I’ll link it here!</p>
<p><img src="https://0x00sec.s3.amazonaws.com/original/2X/0/0ed4d3056f0490a6bee08312430886589af49454.png" alt="enter image description here" width="" height=""></p>
<p>If you look on the side bar of your BurpSuite, under <code>Target &gt; Site map &gt; https://www.google.com/</code></p>
<p>We can already see a quick overview of immediate file structure of the site, loaded scripts, and also, if we take a look at the wider Site map, a long list of other requested hosts, we may decide to use this infomation later, as always in pentesting, it is better to collect too much infomation, and decide not to use it, than to remove it, and end up recollecting it unnecessarily. Remember, this is ‘passive’ recon, we need to stay very quiet in this stage, and not set off any alarm bells. *</p>
<p>If you have Burp Suite Professional, you can also right click this asset and select “Passively Scan this Host”, and it will hunt your exisiting, requested page code for known vulnerabilities, email disclosure and the like. I do not have Burp Suite Professional, and so I will not be using it <img src="https://0x00sec.org/images/emoji/twitter/smiley.png?v=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
<blockquote>
<p>*Note, if this particular website does not recieve many page views, you may decide to use a VPN using the same region as the target<br>
demographic for this website. If the SOC/SIEM solutions are really<br>
sensitive, even a page view from a foreign location could create<br>
flags. If your goal is to not be detected by any monitoring solution<br>
(as usally is the goal with a good Pentest), then this might be a<br>
thing you would go for.</p>
</blockquote>
<p>Okay, so that hasn’t helped us significantly, occasionally, things will pop out like <code>/cgi-bin/</code> , <code>/admin/</code> or <code>/includes/</code>, if something does catch your eye, immediately write this down in your reporting software (perhaps in a tool like <a href="https://github.com/lair-framework/lair">Lair</a>, if somebody makes a writeup on how to spin this up, let me know, and I’ll link it here!</p>
<h3>Passive port scanning with Shodan, wait, passive, portscanning? What?</h3>
<p>So you’ve been to the website, you know at least port 80 or port 443 is open, but what else is running? You can just open up shodan, or you can use the insanely cool nmap scripts.</p>
<p>Obtain a shodan API key, (if somebody makes a tutorial on this, I’ll link it!), and place it inline with this nmap command.</p>
<pre><code class="lang-auto">nmap --script=shodan-api --script-args 'shodan-api.apikey=XXXXXX' google.com
</code></pre>
<p><span alt="enter image description here" class="broken-image" title="This image is broken"><svg class="fa d-icon d-icon-unlink svg-icon" aria-hidden="true"><use xlink:href="#unlink"></use></svg></span></p>
<p>In this image, I have censored my API key, although this is a very simple example, this will do multiple things:</p>
<ul>
<li>-sn - Disable Port Scan</li>
<li>-Pn - Skip host discovery, don’t ping the host</li>
<li>-n - Skip DNS Resolution</li>
</ul>
<p>Nmap will then realise it has nothing left to do, and will run the shodan-api script. The shodan API script will go out to <a href="http://shodan.io">shodan.io</a> and retrieve all infomation it knows about the host, including sometimes host versions and port numbers. This has been way more infomational in other circumstances, your mileage may vary.</p>
<p>The point of these tutorials is to provide a very realistic view of what you will see in a normal pentest, and usually, you will not get a single Severity 5 vulnerability with remote code execution, you’ll find 5 Severity 3’s, and you can then string these together to get a shell, to get access to a panel, or even make a very convincing phishing page. We will cover that in more detail in the exploitation section of this series.</p>
<h3>DNS Bruteforcing, but, really fast</h3>
<p>Before we go into DNS bruteforcing, we’ll look into the low hanging fruit of DNS, and that is zone transfers. Zone transfers was initially a tool used for server administrators to allow them to easily replicate a DNS database, such as transfering to new domain names. If the target company has ever migrated their website, and have little security awareness, this will usually work.</p>
<p><span alt="enter image description here" class="broken-image" title="This image is broken"><svg class="fa d-icon d-icon-unlink svg-icon" aria-hidden="true"><use xlink:href="#unlink"></use></svg></span></p>
<p>We can easily do domain transfers using a tool called <a href="https://github.com/fwaeytens/dnsenum">dnsenum</a>, it is written in perl (<a class="mention" href="https://0x00sec.org/u/nugget">@nugget</a>), and is a kind of old-reliable tool used in my pentest arsenal.  As you can see here, dnsenum uncovered a few interesting things about the host, namely:</p>
<ul>
<li>Host Address
<ul>
<li>This is the IP that you’ll get when you do a simple nslookup on the domain</li>
</ul>
</li>
<li>Wild card host
<ul>
<li>This is the IP that will be returned when you call a random subdomain, such as <code>kttfvatukbld</code>, unless you get really lucky (or unlucky, your call), and that is a real subdomain, this is usually an IP from your DNS provider, or from your ISP. If they’re really secure, the wildcard domain will be the same as the Host IP, which makes domain enumeration a bitch.</li>
</ul>
</li>
<li>Nameservers
<ul>
<li>These are the nameservers that you have used to do the lookup, usually, in a small-medium sized company, this DNS is hosted elsewhere, and can often be courtesy of the domain name registrar. This can be insanely useful infomation.</li>
</ul>
</li>
<li>MX Servers
<ul>
<li>Now this infomation is so easily overlooked, although it is very surprising what this can yield. This will reveal the MX servers of the domain, a lot of companies in the corporate space now a days will use externally hosted email, such as Google or Microsoft/Outlook, quite often these things link to the entire workflow of the company, which can lead you to discover things like Microsoft Lync Servers, Login panels for user email etc.</li>
</ul>
</li>
<li>Zone Transfers
<ul>
<li>This is quite a rare one now a days, you won’t see this work on a lot of hosts that are in the public domain, facebook, twitter etc. Although on pentests, this is surprisingly common. If this succeeds, it will return a list of all registered sub-domains, which is huge. You’re better off trying it and not finding anything, than never knowing.</li>
</ul>
</li>
</ul>
<h4>Ok, the fast bit.</h4>
<p>Ever heard of Aiodns? Well now you have. Aiodns is a DNS resolver that does synchronous calls over an asynchronous medium. In short, that means that you can efficiently make more than one call without closing the connection after each request. This means it can be, really fast.</p>
<p>Introducing <a href="https://github.com/blark/aiodnsbrute">Aiodnsbrute</a>! Blark had the smarts to turn this into a bruteforcing tool, and man it works well. I mean read this:</p>
<p>“Benchmarks on small VPS hosts put around 100k DNS resoultions at 1.5-2mins. An amazon M3 box was used to make 1 mil requests in just over 3 minutes. Your mileage may vary. It’s probably best to avoid using Google’s resolvers if you’re purely interested in speed.”</p>
<p>1 million requests, uh, what? Feed this tool a Discovery Dictionary nabbed from <a href="https://github.com/danielmiessler/SecLists">SecLists</a> (Discovery&gt;DNS&gt;subdomains-top1mil-110000.txt is great), and you’re on the road to discovering every damn subdomain this domain name has.</p>
<p>What is cooler, is that PCI compliance is a standard, and part of it’s requirements is that every host have a signed, valid certificate. Can’t have a valid certificate on an IP, so what do firms do? They create subdomains for everything they need SSL access to. Yep, you guesssed it, that includes VPN portals, email logins, development sites (please).</p>
<p>Lets try it on <a href="http://google.com">google.com</a></p>
<pre><code class="lang-auto">$ aiodnsbrute google.com
</code></pre>
<p><span alt="enter image description here" class="broken-image" title="This image is broken"><svg class="fa d-icon d-icon-unlink svg-icon" aria-hidden="true"><use xlink:href="#unlink"></use></svg></span></p>
<p>Uh, well that’s weird, why are their so many of those 92 IP addresses?</p>
<p>Those are actually the DNS resolver. Remember when we did a DNS Lookup of a wildcard? Yeah, it’s the same IP. We can easily remedy this with a grep command.</p>
<pre><code class="lang-auto">aiodnsbrute google.com | grep -v "the resolver IP"
</code></pre>
<p><span alt="enter image description here" class="broken-image" title="This image is broken"><svg class="fa d-icon d-icon-unlink svg-icon" aria-hidden="true"><use xlink:href="#unlink"></use></svg></span></p>
<p>Okay, so granted the formatting is a little broken, but this is real world pentesting people, this isn’t supposed to be glamarous!</p>
<p>Look at those subdomains, they actually go somewhere. Now you can save these IP addresses in a long text file for further examination, or maybe you want to scan them with your newly learned passive shodan skills? You can do reverse nslookups on the IP’s too and see if they resolve somewhere else.</p>
<h3>Scraping Emails</h3>
<p>You might have used this tool before, it’s pretty cool.</p>
<p>It’s called theHarvester.  What it does, is scrape google results, titles, descriptions, metadata, and looks for things resembling email addresses.</p>
<pre><code class="lang-auto">./theHarvester.py -d companydomain.com -b google
</code></pre>
<p><span alt="enter image description here" class="broken-image" title="This image is broken"><svg class="fa d-icon d-icon-unlink svg-icon" aria-hidden="true"><use xlink:href="#unlink"></use></svg></span></p>
<p>For demonstration purposes, I used <a href="http://protonmail.com">protonmail.com</a>, but put in any company domain name, and you’ll usually nab a few emails. If this doesn’t work, you can try Hunter.</p>
<h3>
<a href="http://Hunter.io">Hunter.io</a>, like Google, but for emails</h3>
<p><span alt="enter image description here" class="broken-image" title="This image is broken"><svg class="fa d-icon d-icon-unlink svg-icon" aria-hidden="true"><use xlink:href="#unlink"></use></svg></span><br>
16,000 results, not bad. What this also does that is so cool is that it tells you the common pattern of emails. What you can do with this (I’ll go into this more in detail in part 2), is use this to generate email addresses from names, which can later be used for password spraying (trying a single password for every single email address).</p>
<p>We can do a lot with this infomation, we can load it into an email program and send out phishing emails, we can password spray with them (I will show you the way), or, we can check them for leaks. This where weleakinfo comes in…</p>
<h3><a href="http://Weleakinfo.com">Weleakinfo.com</a></h3>
<p>Remember those data breaches, for Adobe, Linkedin, Myspace? Stuff like that? Well the dumps from these are still out there, and people have published them, you can still find them in old magnet links around the way, however there are thousands of dumps to recover, and they’re hard to find.</p>
<p><a href="https://weleakinfo.com/">Weleakinfo</a> takes all this infomation and compiles it into one big, fast, searchable database. And if you decide to stuff all these emails in there, you might even be lucky enough to get a few old passwords, which you can now variate and try on existing company accounts, how cool is this! We haven’t even instrusively touched their servers, and we already have their account passwords? Not so fast.</p>
<p>16,000 emails! If an email lookup took you 10 seconds to do, and take down the results, (which is very fast) it would take you about 48 hours of non-stop copy pasting to go through them all.</p>
<p>If you actually want to be able to sleep, and don’t have fingers as muscly as John Cena, then I reccomend you automate it. Weleakinfo are actually nice enough to provide a public API, <a href="https://weleakinfo.com/api/public">https://weleakinfo.com/api/public</a>,  which allows 3 requests per second, if you want to go faster, try out a tool like <a href="https://0x00sec.org/t/create-your-own-private-botnet-with-proxydock/5917">ProxyDock</a></p>
<p>(If somebody wants to write an article on this, and make a tool for this, let me know and I’ll link it here)</p>
<h3>Geo2IP - Extra</h3>
<p>Okay, scenario time. You know about a hosts location, but you don’t have a clue about it’s exact details. No problem. Time to use <a href="https://github.com/pry0cc/geo2ip">geo2ip</a>. Geo2Ip is a tool I developed with <a class="mention" href="https://0x00sec.org/u/ioth1nkn0t">@IoTh1nkN0t</a>, and it basically takes a rough coordinate location, and then gives you ranges associated with that coordinate. From there, you can feed these into an nslookup tool (maybe make your own with aiodns!), and discover all assets associated with them.</p>
<h3>Reverse Whois</h3>
<p>Another tool you can use for asset discovery is <a href="http://www.viewdns.info/reversewhois/?">reverse whois</a>.</p>
<p>Now you can use these tools to enter in a company name, email address, or registrant name (obtained from your previous recon), and then go through these same steps with the newly obtained emails, domain names, and extra infomation. Repeat until you have no more passive infomation to obtain. Now you are ready for Active Recon.</p>
<p>In conclusion, there is a vast amount of infomation you can obtain just by knowing where to look. This is by no means an exhaustive list, but it contains a lot of the things that I use in my day to day OSINT that really give me a step up in the pentesting scene.</p>
<p>Let me know in the comments if you liked this article, and make sure to click that &lt;3 button to let me know you want more like this. And be sure to share this if you learnt anything to spread the <a href="https://www.youtube.com/watch?v=3DZ1tWsnLeQ">knowledge</a>!</p>
<p>Thank you for reading, and as always, stay snappy <img src="https://0x00sec.org/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/1">Read full topic</a></p>
        ]]></description>
        <link>https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715/1</link>
        <pubDate>Thu, 17 May 2018 11:39:04 +0000</pubDate>
        <guid isPermaLink="false">0x00sec.org-post-6715-1</guid>
        <source url="https://0x00sec.org/t/osint-passive-recon-and-discovery-of-assets/6715.rss">OSINT - Passive Recon and Discovery of Assets</source>
      </item>
  </channel>
</rss>
